/* @license twgl.js 4.16.1 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */
let VecType=Float32Array;function setDefaultType(e){const t=VecType;return VecType=e,t}function create(e,t,r){const n=new VecType(3);return e&&(n[0]=e),t&&(n[1]=t),r&&(n[2]=r),n}function add(e,t,r){return(r=r||new VecType(3))[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r}function subtract(e,t,r){return(r=r||new VecType(3))[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r}function lerp(e,t,r,n){return(n=n||new VecType(3))[0]=e[0]+r*(t[0]-e[0]),n[1]=e[1]+r*(t[1]-e[1]),n[2]=e[2]+r*(t[2]-e[2]),n}function lerpV(e,t,r,n){return(n=n||new VecType(3))[0]=e[0]+r[0]*(t[0]-e[0]),n[1]=e[1]+r[1]*(t[1]-e[1]),n[2]=e[2]+r[2]*(t[2]-e[2]),n}function max(e,t,r){return(r=r||new VecType(3))[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r}function min(e,t,r){return(r=r||new VecType(3))[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.min(e[2],t[2]),r}function mulScalar(e,t,r){return(r=r||new VecType(3))[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r}function divScalar(e,t,r){return(r=r||new VecType(3))[0]=e[0]/t,r[1]=e[1]/t,r[2]=e[2]/t,r}function cross(e,t,r){r=r||new VecType(3);const n=e[2]*t[0]-e[0]*t[2],a=e[0]*t[1]-e[1]*t[0];return r[0]=e[1]*t[2]-e[2]*t[1],r[1]=n,r[2]=a,r}function dot(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function length$1(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}function lengthSq(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]}function distance(e,t){const r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(r*r+n*n+a*a)}function distanceSq(e,t){const r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return r*r+n*n+a*a}function normalize(e,t){t=t||new VecType(3);const r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=Math.sqrt(r);return n>1e-5?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=0,t[1]=0,t[2]=0),t}function negate(e,t){return(t=t||new VecType(3))[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function copy(e,t){return(t=t||new VecType(3))[0]=e[0],t[1]=e[1],t[2]=e[2],t}function multiply(e,t,r){return(r=r||new VecType(3))[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r}function divide(e,t,r){return(r=r||new VecType(3))[0]=e[0]/t[0],r[1]=e[1]/t[1],r[2]=e[2]/t[2],r}var v3=Object.freeze({__proto__:null,add:add,copy:copy,create:create,cross:cross,distance:distance,distanceSq:distanceSq,divide:divide,divScalar:divScalar,dot:dot,lerp:lerp,lerpV:lerpV,length:length$1,lengthSq:lengthSq,max:max,min:min,mulScalar:mulScalar,multiply:multiply,negate:negate,normalize:normalize,setDefaultType:setDefaultType,subtract:subtract});let xAxis,yAxis,zAxis,MatType=Float32Array;function setDefaultType$1(e){const t=MatType;return MatType=e,t}function negate$1(e,t){return(t=t||new MatType(16))[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t}function copy$1(e,t){return(t=t||new MatType(16))[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function identity(e){return(e=e||new MatType(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function transpose(e,t){if((t=t||new MatType(16))===e){let r;return r=e[1],e[1]=e[4],e[4]=r,r=e[2],e[2]=e[8],e[8]=r,r=e[3],e[3]=e[12],e[12]=r,r=e[6],e[6]=e[9],e[9]=r,r=e[7],e[7]=e[13],e[13]=r,r=e[11],e[11]=e[14],e[14]=r,t}const r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=e[9],m=e[10],T=e[11],E=e[12],A=e[13],p=e[14],y=e[15];return t[0]=r,t[1]=i,t[2]=f,t[3]=E,t[4]=n,t[5]=s,t[6]=l,t[7]=A,t[8]=a,t[9]=u,t[10]=m,t[11]=p,t[12]=o,t[13]=c,t[14]=T,t[15]=y,t}function inverse(e,t){t=t||new MatType(16);const r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=e[9],m=e[10],T=e[11],E=e[12],A=e[13],p=e[14],y=e[15],_=m*y,d=p*T,R=u*y,F=p*c,S=u*T,I=m*c,b=a*y,N=p*o,g=a*T,x=m*o,B=a*c,h=u*o,U=f*A,P=E*l,G=i*A,C=E*s,M=i*l,D=f*s,O=r*A,L=E*n,v=r*l,w=f*n,$=r*s,V=i*n,k=_*s+F*l+S*A-(d*s+R*l+I*A),z=d*n+b*l+x*A-(_*n+N*l+g*A),X=R*n+N*s+B*A-(F*n+b*s+h*A),H=I*n+g*s+h*l-(S*n+x*s+B*l),Y=1/(r*k+i*z+f*X+E*H);return t[0]=Y*k,t[1]=Y*z,t[2]=Y*X,t[3]=Y*H,t[4]=Y*(d*i+R*f+I*E-(_*i+F*f+S*E)),t[5]=Y*(_*r+N*f+g*E-(d*r+b*f+x*E)),t[6]=Y*(F*r+b*i+h*E-(R*r+N*i+B*E)),t[7]=Y*(S*r+x*i+B*f-(I*r+g*i+h*f)),t[8]=Y*(U*c+C*T+M*y-(P*c+G*T+D*y)),t[9]=Y*(P*o+O*T+w*y-(U*o+L*T+v*y)),t[10]=Y*(G*o+L*c+$*y-(C*o+O*c+V*y)),t[11]=Y*(D*o+v*c+V*T-(M*o+w*c+$*T)),t[12]=Y*(G*m+D*p+P*u-(M*p+U*u+C*m)),t[13]=Y*(v*p+U*a+L*m-(O*m+w*p+P*a)),t[14]=Y*(O*u+V*p+C*a-($*p+G*a+L*u)),t[15]=Y*($*m+M*a+w*u-(v*u+V*m+D*a)),t}function multiply$1(e,t,r){r=r||new MatType(16);const n=e[0],a=e[1],o=e[2],i=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],m=e[9],T=e[10],E=e[11],A=e[12],p=e[13],y=e[14],_=e[15],d=t[0],R=t[1],F=t[2],S=t[3],I=t[4],b=t[5],N=t[6],g=t[7],x=t[8],B=t[9],h=t[10],U=t[11],P=t[12],G=t[13],C=t[14],M=t[15];return r[0]=n*d+s*R+l*F+A*S,r[1]=a*d+u*R+m*F+p*S,r[2]=o*d+c*R+T*F+y*S,r[3]=i*d+f*R+E*F+_*S,r[4]=n*I+s*b+l*N+A*g,r[5]=a*I+u*b+m*N+p*g,r[6]=o*I+c*b+T*N+y*g,r[7]=i*I+f*b+E*N+_*g,r[8]=n*x+s*B+l*h+A*U,r[9]=a*x+u*B+m*h+p*U,r[10]=o*x+c*B+T*h+y*U,r[11]=i*x+f*B+E*h+_*U,r[12]=n*P+s*G+l*C+A*M,r[13]=a*P+u*G+m*C+p*M,r[14]=o*P+c*G+T*C+y*M,r[15]=i*P+f*G+E*C+_*M,r}function setTranslation(e,t,r){return e!==(r=r||identity())&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11]),r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r}function getTranslation(e,t){return(t=t||create())[0]=e[12],t[1]=e[13],t[2]=e[14],t}function getAxis(e,t,r){const n=4*t;return(r=r||create())[0]=e[n+0],r[1]=e[n+1],r[2]=e[n+2],r}function setAxis(e,t,r,n){n!==e&&(n=copy$1(e,n));const a=4*r;return n[a+0]=t[0],n[a+1]=t[1],n[a+2]=t[2],n}function perspective(e,t,r,n,a){a=a||new MatType(16);const o=Math.tan(.5*Math.PI-.5*e),i=1/(r-n);return a[0]=o/t,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=o,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(r+n)*i,a[11]=-1,a[12]=0,a[13]=0,a[14]=r*n*i*2,a[15]=0,a}function ortho(e,t,r,n,a,o,i){return(i=i||new MatType(16))[0]=2/(t-e),i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2/(n-r),i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2/(a-o),i[11]=0,i[12]=(t+e)/(e-t),i[13]=(n+r)/(r-n),i[14]=(o+a)/(a-o),i[15]=1,i}function frustum(e,t,r,n,a,o,i){const s=t-e,u=n-r,c=a-o;return(i=i||new MatType(16))[0]=2*a/s,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*a/u,i[6]=0,i[7]=0,i[8]=(e+t)/s,i[9]=(n+r)/u,i[10]=o/c,i[11]=-1,i[12]=0,i[13]=0,i[14]=a*o/c,i[15]=0,i}function lookAt(e,t,r,n){return n=n||new MatType(16),xAxis=xAxis||create(),yAxis=yAxis||create(),normalize(subtract(e,t,zAxis=zAxis||create()),zAxis),normalize(cross(r,zAxis,xAxis),xAxis),normalize(cross(zAxis,xAxis,yAxis),yAxis),n[0]=xAxis[0],n[1]=xAxis[1],n[2]=xAxis[2],n[3]=0,n[4]=yAxis[0],n[5]=yAxis[1],n[6]=yAxis[2],n[7]=0,n[8]=zAxis[0],n[9]=zAxis[1],n[10]=zAxis[2],n[11]=0,n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n}function translation(e,t){return(t=t||new MatType(16))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function translate(e,t,r){r=r||new MatType(16);const n=t[0],a=t[1],o=t[2],i=e[0],s=e[1],u=e[2],c=e[3],f=e[4],l=e[5],m=e[6],T=e[7],E=e[8],A=e[9],p=e[10],y=e[11],_=e[12],d=e[13],R=e[14],F=e[15];return e!==r&&(r[0]=i,r[1]=s,r[2]=u,r[3]=c,r[4]=f,r[5]=l,r[6]=m,r[7]=T,r[8]=E,r[9]=A,r[10]=p,r[11]=y),r[12]=i*n+f*a+E*o+_,r[13]=s*n+l*a+A*o+d,r[14]=u*n+m*a+p*o+R,r[15]=c*n+T*a+y*o+F,r}function rotationX(e,t){t=t||new MatType(16);const r=Math.cos(e),n=Math.sin(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function rotateX(e,t,r){r=r||new MatType(16);const n=e[4],a=e[5],o=e[6],i=e[7],s=e[8],u=e[9],c=e[10],f=e[11],l=Math.cos(t),m=Math.sin(t);return r[4]=l*n+m*s,r[5]=l*a+m*u,r[6]=l*o+m*c,r[7]=l*i+m*f,r[8]=l*s-m*n,r[9]=l*u-m*a,r[10]=l*c-m*o,r[11]=l*f-m*i,e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r}function rotationY(e,t){t=t||new MatType(16);const r=Math.cos(e),n=Math.sin(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function rotateY(e,t,r){r=r||new MatType(16);const n=e[0],a=e[1],o=e[2],i=e[3],s=e[8],u=e[9],c=e[10],f=e[11],l=Math.cos(t),m=Math.sin(t);return r[0]=l*n-m*s,r[1]=l*a-m*u,r[2]=l*o-m*c,r[3]=l*i-m*f,r[8]=l*s+m*n,r[9]=l*u+m*a,r[10]=l*c+m*o,r[11]=l*f+m*i,e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r}function rotationZ(e,t){t=t||new MatType(16);const r=Math.cos(e),n=Math.sin(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function rotateZ(e,t,r){r=r||new MatType(16);const n=e[0],a=e[1],o=e[2],i=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=Math.cos(t),m=Math.sin(t);return r[0]=l*n+m*s,r[1]=l*a+m*u,r[2]=l*o+m*c,r[3]=l*i+m*f,r[4]=l*s-m*n,r[5]=l*u-m*a,r[6]=l*c-m*o,r[7]=l*f-m*i,e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r}function axisRotation(e,t,r){r=r||new MatType(16);let n=e[0],a=e[1],o=e[2];const i=Math.sqrt(n*n+a*a+o*o),s=(n/=i)*n,u=(a/=i)*a,c=(o/=i)*o,f=Math.cos(t),l=Math.sin(t),m=1-f;return r[0]=s+(1-s)*f,r[1]=n*a*m+o*l,r[2]=n*o*m-a*l,r[3]=0,r[4]=n*a*m-o*l,r[5]=u+(1-u)*f,r[6]=a*o*m+n*l,r[7]=0,r[8]=n*o*m+a*l,r[9]=a*o*m-n*l,r[10]=c+(1-c)*f,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function axisRotate(e,t,r,n){n=n||new MatType(16);let a=t[0],o=t[1],i=t[2];const s=Math.sqrt(a*a+o*o+i*i),u=(a/=s)*a,c=(o/=s)*o,f=(i/=s)*i,l=Math.cos(r),m=Math.sin(r),T=1-l,E=u+(1-u)*l,A=a*o*T+i*m,p=a*i*T-o*m,y=a*o*T-i*m,_=c+(1-c)*l,d=o*i*T+a*m,R=a*i*T+o*m,F=o*i*T-a*m,S=f+(1-f)*l,I=e[0],b=e[1],N=e[2],g=e[3],x=e[4],B=e[5],h=e[6],U=e[7],P=e[8],G=e[9],C=e[10],M=e[11];return n[0]=E*I+A*x+p*P,n[1]=E*b+A*B+p*G,n[2]=E*N+A*h+p*C,n[3]=E*g+A*U+p*M,n[4]=y*I+_*x+d*P,n[5]=y*b+_*B+d*G,n[6]=y*N+_*h+d*C,n[7]=y*g+_*U+d*M,n[8]=R*I+F*x+S*P,n[9]=R*b+F*B+S*G,n[10]=R*N+F*h+S*C,n[11]=R*g+F*U+S*M,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function scaling(e,t){return(t=t||new MatType(16))[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function scale(e,t,r){r=r||new MatType(16);const n=t[0],a=t[1],o=t[2];return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=n*e[3],r[4]=a*e[4],r[5]=a*e[5],r[6]=a*e[6],r[7]=a*e[7],r[8]=o*e[8],r[9]=o*e[9],r[10]=o*e[10],r[11]=o*e[11],e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r}function transformPoint(e,t,r){r=r||create();const n=t[0],a=t[1],o=t[2],i=n*e[3]+a*e[7]+o*e[11]+e[15];return r[0]=(n*e[0]+a*e[4]+o*e[8]+e[12])/i,r[1]=(n*e[1]+a*e[5]+o*e[9]+e[13])/i,r[2]=(n*e[2]+a*e[6]+o*e[10]+e[14])/i,r}function transformDirection(e,t,r){r=r||create();const n=t[0],a=t[1],o=t[2];return r[0]=n*e[0]+a*e[4]+o*e[8],r[1]=n*e[1]+a*e[5]+o*e[9],r[2]=n*e[2]+a*e[6]+o*e[10],r}function transformNormal(e,t,r){r=r||create();const n=inverse(e),a=t[0],o=t[1],i=t[2];return r[0]=a*n[0]+o*n[1]+i*n[2],r[1]=a*n[4]+o*n[5]+i*n[6],r[2]=a*n[8]+o*n[9]+i*n[10],r}var m4=Object.freeze({__proto__:null,axisRotate:axisRotate,axisRotation:axisRotation,copy:copy$1,frustum:frustum,getAxis:getAxis,getTranslation:getTranslation,identity:identity,inverse:inverse,lookAt:lookAt,multiply:multiply$1,negate:negate$1,ortho:ortho,perspective:perspective,rotateX:rotateX,rotateY:rotateY,rotateZ:rotateZ,rotationX:rotationX,rotationY:rotationY,rotationZ:rotationZ,scale:scale,scaling:scaling,setAxis:setAxis,setDefaultType:setDefaultType$1,setTranslation:setTranslation,transformDirection:transformDirection,transformNormal:transformNormal,transformPoint:transformPoint,translate:translate,translation:translation,transpose:transpose});const BYTE=5120,UNSIGNED_BYTE=5121,SHORT=5122,UNSIGNED_SHORT=5123,INT=5124,UNSIGNED_INT=5125,FLOAT=5126,UNSIGNED_SHORT_4_4_4_4=32819,UNSIGNED_SHORT_5_5_5_1=32820,UNSIGNED_SHORT_5_6_5=33635,HALF_FLOAT=5131,UNSIGNED_INT_2_10_10_10_REV=33640,UNSIGNED_INT_10F_11F_11F_REV=35899,UNSIGNED_INT_5_9_9_9_REV=35902,FLOAT_32_UNSIGNED_INT_24_8_REV=36269,UNSIGNED_INT_24_8=34042,glTypeToTypedArray={};{const e=glTypeToTypedArray;e[BYTE]=Int8Array,e[UNSIGNED_BYTE]=Uint8Array,e[SHORT]=Int16Array,e[UNSIGNED_SHORT]=Uint16Array,e[INT]=Int32Array,e[UNSIGNED_INT]=Uint32Array,e[FLOAT]=Float32Array,e[32819]=Uint16Array,e[32820]=Uint16Array,e[33635]=Uint16Array,e[5131]=Uint16Array,e[33640]=Uint32Array,e[35899]=Uint32Array,e[35902]=Uint32Array,e[36269]=Uint32Array,e[34042]=Uint32Array}function getGLTypeForTypedArray(e){if(e instanceof Int8Array)return BYTE;if(e instanceof Uint8Array)return UNSIGNED_BYTE;if(e instanceof Uint8ClampedArray)return UNSIGNED_BYTE;if(e instanceof Int16Array)return SHORT;if(e instanceof Uint16Array)return UNSIGNED_SHORT;if(e instanceof Int32Array)return INT;if(e instanceof Uint32Array)return UNSIGNED_INT;if(e instanceof Float32Array)return FLOAT;throw new Error("unsupported typed array type")}function getGLTypeForTypedArrayType(e){if(e===Int8Array)return BYTE;if(e===Uint8Array)return UNSIGNED_BYTE;if(e===Uint8ClampedArray)return UNSIGNED_BYTE;if(e===Int16Array)return SHORT;if(e===Uint16Array)return UNSIGNED_SHORT;if(e===Int32Array)return INT;if(e===Uint32Array)return UNSIGNED_INT;if(e===Float32Array)return FLOAT;throw new Error("unsupported typed array type")}function getTypedArrayTypeForGLType(e){const t=glTypeToTypedArray[e];if(!t)throw new Error("unknown gl type");return t}const isArrayBuffer="undefined"!=typeof SharedArrayBuffer?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};var typedarrays=Object.freeze({__proto__:null,getGLTypeForTypedArray:getGLTypeForTypedArray,getGLTypeForTypedArrayType:getGLTypeForTypedArrayType,getTypedArrayTypeForGLType:getTypedArrayTypeForGLType,isArrayBuffer:isArrayBuffer});function copyNamedProperties(e,t,r){e.forEach(function(e){const n=t[e];void 0!==n&&(r[e]=n)})}function copyExistingProperties(e,t){Object.keys(t).forEach(function(r){t.hasOwnProperty(r)&&e.hasOwnProperty(r)&&(t[r]=e[r])})}function error(...e){console.error(...e)}function warn(...e){console.warn(...e)}function isBuffer(e,t){return"undefined"!=typeof WebGLBuffer&&t instanceof WebGLBuffer}function isRenderbuffer(e,t){return"undefined"!=typeof WebGLRenderbuffer&&t instanceof WebGLRenderbuffer}function isShader(e,t){return"undefined"!=typeof WebGLShader&&t instanceof WebGLShader}function isTexture(e,t){return"undefined"!=typeof WebGLTexture&&t instanceof WebGLTexture}function isSampler(e,t){return"undefined"!=typeof WebGLSampler&&t instanceof WebGLSampler}const STATIC_DRAW=35044,ARRAY_BUFFER=34962,ELEMENT_ARRAY_BUFFER=34963,BUFFER_SIZE=34660,BYTE$1=5120,UNSIGNED_BYTE$1=5121,SHORT$1=5122,UNSIGNED_SHORT$1=5123,INT$1=5124,UNSIGNED_INT$1=5125,FLOAT$1=5126,defaults={attribPrefix:""};function setAttributePrefix(e){defaults.attribPrefix=e}function setDefaults(e){copyExistingProperties(e,defaults)}function setBufferFromTypedArray(e,t,r,n,a){e.bindBuffer(t,r),e.bufferData(t,n,a||STATIC_DRAW)}function createBufferFromTypedArray(e,t,r,n){if(isBuffer(e,t))return t;r=r||ARRAY_BUFFER;const a=e.createBuffer();return setBufferFromTypedArray(e,r,a,t,n),a}function isIndices(e){return"indices"===e}function getNormalizationForTypedArray(e){return e instanceof Int8Array||e instanceof Uint8Array}function getNormalizationForTypedArrayType(e){return e===Int8Array||e===Uint8Array}function getArray(e){return e.length?e:e.data}const texcoordRE=/coord|texture/i,colorRE=/color|colour/i;function guessNumComponentsFromName(e,t){let r;if(t%(r=texcoordRE.test(e)?2:colorRE.test(e)?4:3)>0)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${r} but ${t} values is not evenly divisible by ${r}. You should specify it.`);return r}function getNumComponents(e,t){return e.numComponents||e.size||guessNumComponentsFromName(t,getArray(e).length)}function makeTypedArray(e,t){if(isArrayBuffer(e))return e;if(isArrayBuffer(e.data))return e.data;Array.isArray(e)&&(e={data:e});let r=e.type;return r||(r=isIndices(t)?Uint16Array:Float32Array),new r(e.data)}function createAttribsFromArrays(e,t){const r={};return Object.keys(t).forEach(function(n){if(!isIndices(n)){const a=t[n],o=a.attrib||a.name||a.attribName||defaults.attribPrefix+n;if(a.value){if(!Array.isArray(a.value)&&!isArrayBuffer(a.value))throw new Error("array.value is not array or typedarray");r[o]={value:a.value}}else{let t,i,s,u;if(a.buffer&&a.buffer instanceof WebGLBuffer)t=a.buffer,u=a.numComponents||a.size,i=a.type,s=a.normalize;else if("number"==typeof a||"number"==typeof a.data){const r=a.data||a,o=a.type||Float32Array,c=r*o.BYTES_PER_ELEMENT;i=getGLTypeForTypedArrayType(o),s=void 0!==a.normalize?a.normalize:getNormalizationForTypedArrayType(o),u=a.numComponents||a.size||guessNumComponentsFromName(n,r),t=e.createBuffer(),e.bindBuffer(ARRAY_BUFFER,t),e.bufferData(ARRAY_BUFFER,c,a.drawType||STATIC_DRAW)}else{const r=makeTypedArray(a,n);t=createBufferFromTypedArray(e,r,void 0,a.drawType),i=getGLTypeForTypedArray(r),s=void 0!==a.normalize?a.normalize:getNormalizationForTypedArray(r),u=getNumComponents(a,n)}r[o]={buffer:t,numComponents:u,type:i,normalize:s,stride:a.stride||0,offset:a.offset||0,divisor:void 0===a.divisor?void 0:a.divisor,drawType:a.drawType}}}}),e.bindBuffer(ARRAY_BUFFER,null),r}function setAttribInfoBufferFromArray(e,t,r,n){r=makeTypedArray(r),void 0!==n?(e.bindBuffer(ARRAY_BUFFER,t.buffer),e.bufferSubData(ARRAY_BUFFER,n,r)):setBufferFromTypedArray(e,ARRAY_BUFFER,t.buffer,r,t.drawType)}function getBytesPerValueForGLType(e,t){return t===BYTE$1?1:t===UNSIGNED_BYTE$1?1:t===SHORT$1?2:t===UNSIGNED_SHORT$1?2:t===INT$1?4:t===UNSIGNED_INT$1?4:t===FLOAT$1?4:0}const positionKeys=["position","positions","a_position"];function getNumElementsFromNonIndexedArrays(e){let t,r;for(r=0;r<positionKeys.length&&!((t=positionKeys[r])in e);++r);r===positionKeys.length&&(t=Object.keys(e)[0]);const n=e[t],a=getArray(n).length,o=getNumComponents(n,t),i=a/o;if(a%o>0)throw new Error(`numComponents ${o} not correct for length ${a}`);return i}function getNumElementsFromAttributes(e,t){let r,n;for(n=0;n<positionKeys.length&&!((r=positionKeys[n])in t)&&!((r=defaults.attribPrefix+r)in t);++n);n===positionKeys.length&&(r=Object.keys(t)[0]);const a=t[r];e.bindBuffer(ARRAY_BUFFER,a.buffer);const o=e.getBufferParameter(ARRAY_BUFFER,BUFFER_SIZE);e.bindBuffer(ARRAY_BUFFER,null);const i=o/getBytesPerValueForGLType(e,a.type),s=a.numComponents||a.size,u=i/s;if(u%1!=0)throw new Error(`numComponents ${s} not correct for length ${length}`);return u}function createBufferInfoFromArrays(e,t,r){const n=createAttribsFromArrays(e,t),a=Object.assign({},r||{});a.attribs=Object.assign({},r?r.attribs:{},n);const o=t.indices;if(o){const t=makeTypedArray(o,"indices");a.indices=createBufferFromTypedArray(e,t,ELEMENT_ARRAY_BUFFER),a.numElements=t.length,a.elementType=getGLTypeForTypedArray(t)}else a.numElements||(a.numElements=getNumElementsFromAttributes(e,a.attribs));return a}function createBufferFromArray(e,t,r){const n="indices"===r?ELEMENT_ARRAY_BUFFER:ARRAY_BUFFER;return createBufferFromTypedArray(e,makeTypedArray(t,r),n)}function createBuffersFromArrays(e,t){const r={};return Object.keys(t).forEach(function(n){r[n]=createBufferFromArray(e,t[n],n)}),t.indices?(r.numElements=t.indices.length,r.elementType=getGLTypeForTypedArray(makeTypedArray(t.indices))):r.numElements=getNumElementsFromNonIndexedArrays(t),r}var attributes=Object.freeze({__proto__:null,createAttribsFromArrays:createAttribsFromArrays,createBuffersFromArrays:createBuffersFromArrays,createBufferFromArray:createBufferFromArray,createBufferFromTypedArray:createBufferFromTypedArray,createBufferInfoFromArrays:createBufferInfoFromArrays,setAttribInfoBufferFromArray:setAttribInfoBufferFromArray,setAttributePrefix:setAttributePrefix,setAttributeDefaults_:setDefaults,getNumComponents_:getNumComponents,getArray_:getArray});const getArray$1=getArray,getNumComponents$1=getNumComponents;function augmentTypedArray(e,t){let r=0;return e.push=function(){for(let t=0;t<arguments.length;++t){const n=arguments[t];if(n instanceof Array||isArrayBuffer(n))for(let t=0;t<n.length;++t)e[r++]=n[t];else e[r++]=n}},e.reset=function(e){r=e||0},e.numComponents=t,Object.defineProperty(e,"numElements",{get:function(){return this.length/this.numComponents|0}}),e}function createAugmentedTypedArray(e,t,r){return augmentTypedArray(new(r||Float32Array)(e*t),e)}function allButIndices(e){return"indices"!==e}function deindexVertices(e){const t=e.indices,r={},n=t.length;return Object.keys(e).filter(allButIndices).forEach(function(a){const o=e[a],i=o.numComponents,s=createAugmentedTypedArray(i,n,o.constructor);for(let e=0;e<n;++e){const r=t[e]*i;for(let e=0;e<i;++e)s.push(o[r+e])}r[a]=s}),r}function flattenNormals(e){if(e.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");const t=e.normal,r=t.length;for(let e=0;e<r;e+=9){const r=t[e+0],n=t[e+1],a=t[e+2],o=t[e+3],i=t[e+4],s=t[e+5];let u=r+o+t[e+6],c=n+i+t[e+7],f=a+s+t[e+8];const l=Math.sqrt(u*u+c*c+f*f);u/=l,c/=l,f/=l,t[e+0]=u,t[e+1]=c,t[e+2]=f,t[e+3]=u,t[e+4]=c,t[e+5]=f,t[e+6]=u,t[e+7]=c,t[e+8]=f}return e}function applyFuncToV3Array(e,t,r){const n=e.length,a=new Float32Array(3);for(let o=0;o<n;o+=3)r(t,[e[o],e[o+1],e[o+2]],a),e[o]=a[0],e[o+1]=a[1],e[o+2]=a[2]}function transformNormal$1(e,t,r){r=r||create();const n=t[0],a=t[1],o=t[2];return r[0]=n*e[0]+a*e[1]+o*e[2],r[1]=n*e[4]+a*e[5]+o*e[6],r[2]=n*e[8]+a*e[9]+o*e[10],r}function reorientDirections(e,t){return applyFuncToV3Array(e,t,transformDirection),e}function reorientNormals(e,t){return applyFuncToV3Array(e,inverse(t),transformNormal$1),e}function reorientPositions(e,t){return applyFuncToV3Array(e,t,transformPoint),e}function reorientVertices(e,t){return Object.keys(e).forEach(function(r){const n=e[r];r.indexOf("pos")>=0?reorientPositions(n,t):r.indexOf("tan")>=0||r.indexOf("binorm")>=0?reorientDirections(n,t):r.indexOf("norm")>=0&&reorientNormals(n,t)}),e}function createXYQuadVertices(e,t,r){return e=e||2,{position:{numComponents:2,data:[(t=t||0)+-1*(e*=.5),(r=r||0)+-1*e,t+1*e,r+-1*e,t+-1*e,r+1*e,t+1*e,r+1*e]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function createPlaneVertices(e,t,r,n,a){e=e||1,t=t||1,r=r||1,n=n||1,a=a||identity();const o=(r+1)*(n+1),i=createAugmentedTypedArray(3,o),s=createAugmentedTypedArray(3,o),u=createAugmentedTypedArray(2,o);for(let a=0;a<=n;a++)for(let o=0;o<=r;o++){const c=o/r,f=a/n;i.push(e*c-.5*e,0,t*f-.5*t),s.push(0,1,0),u.push(c,f)}const c=r+1,f=createAugmentedTypedArray(3,r*n*2,Uint16Array);for(let e=0;e<n;e++)for(let t=0;t<r;t++)f.push((e+0)*c+t,(e+1)*c+t,(e+0)*c+t+1),f.push((e+1)*c+t,(e+1)*c+t+1,(e+0)*c+t+1);return reorientVertices({position:i,normal:s,texcoord:u,indices:f},a)}function createSphereVertices(e,t,r,n,a,o,i){if(t<=0||r<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");n=n||0,o=o||0;const s=(a=a||Math.PI)-n,u=(i=i||2*Math.PI)-o,c=(t+1)*(r+1),f=createAugmentedTypedArray(3,c),l=createAugmentedTypedArray(3,c),m=createAugmentedTypedArray(2,c);for(let a=0;a<=r;a++)for(let i=0;i<=t;i++){const c=i/t,T=a/r,E=u*c+o,A=s*T+n,p=Math.sin(E),y=Math.cos(E),_=Math.sin(A),d=y*_,R=Math.cos(A),F=p*_;f.push(e*d,e*R,e*F),l.push(d,R,F),m.push(1-c,T)}const T=t+1,E=createAugmentedTypedArray(3,t*r*2,Uint16Array);for(let e=0;e<t;e++)for(let t=0;t<r;t++)E.push((t+0)*T+e,(t+0)*T+e+1,(t+1)*T+e),E.push((t+1)*T+e,(t+0)*T+e+1,(t+1)*T+e+1);return{position:f,normal:l,texcoord:m,indices:E}}const CUBE_FACE_INDICES=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function createCubeVertices(e){const t=(e=e||1)/2,r=[[-t,-t,-t],[+t,-t,-t],[-t,+t,-t],[+t,+t,-t],[-t,-t,+t],[+t,-t,+t],[-t,+t,+t],[+t,+t,+t]],n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],a=[[1,0],[0,0],[0,1],[1,1]],o=createAugmentedTypedArray(3,24),i=createAugmentedTypedArray(3,24),s=createAugmentedTypedArray(2,24),u=createAugmentedTypedArray(3,12,Uint16Array);for(let e=0;e<6;++e){const t=CUBE_FACE_INDICES[e];for(let u=0;u<4;++u){const c=r[t[u]],f=n[e],l=a[u];o.push(c),i.push(f),s.push(l)}const c=4*e;u.push(c+0,c+1,c+2),u.push(c+0,c+2,c+3)}return{position:o,normal:i,texcoord:s,indices:u}}function createTruncatedConeVertices(e,t,r,n,a,o,i){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(a<1)throw new Error("verticalSubdivisions must be 1 or greater");const s=void 0===o||o,u=void 0===i||i,c=(s?2:0)+(u?2:0),f=(n+1)*(a+1+c),l=createAugmentedTypedArray(3,f),m=createAugmentedTypedArray(3,f),T=createAugmentedTypedArray(2,f),E=createAugmentedTypedArray(3,n*(a+c/2)*2,Uint16Array),A=n+1,p=Math.atan2(e-t,r),y=Math.cos(p),_=Math.sin(p),d=a+(u?2:0);for(let o=s?-2:0;o<=d;++o){let i,s=o/a,u=r*s;o<0?(u=0,s=1,i=e):o>a?(u=r,s=1,i=t):i=e+o/a*(t-e),-2!==o&&o!==a+2||(i=0,s=0),u-=r/2;for(let e=0;e<A;++e){const t=Math.sin(e*Math.PI*2/n),r=Math.cos(e*Math.PI*2/n);l.push(t*i,u,r*i),o<0?m.push(0,-1,0):o>a?m.push(0,1,0):0===i?m.push(0,0,0):m.push(t*y,_,r*y),T.push(e/n,1-s)}}for(let e=0;e<a+c;++e)if(!(1===e&&s||e===a+c-2&&u))for(let t=0;t<n;++t)E.push(A*(e+0)+0+t,A*(e+0)+1+t,A*(e+1)+1+t),E.push(A*(e+0)+0+t,A*(e+1)+1+t,A*(e+1)+0+t);return{position:l,normal:m,texcoord:T,indices:E}}function expandRLEData(e,t){t=t||[];const r=[];for(let n=0;n<e.length;n+=4){const a=e[n],o=e.slice(n+1,n+4);o.push.apply(o,t);for(let e=0;e<a;++e)r.push.apply(r,o)}return r}function create3DFVertices(){const e=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],t=expandRLEData([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),r=expandRLEData([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),n=e.length/3,a={position:createAugmentedTypedArray(3,n),texcoord:createAugmentedTypedArray(2,n),normal:createAugmentedTypedArray(3,n),color:createAugmentedTypedArray(4,n,Uint8Array),indices:createAugmentedTypedArray(3,n/3,Uint16Array)};a.position.push(e),a.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),a.normal.push(t),a.color.push(r);for(let e=0;e<n;++e)a.indices.push(e);return a}function createCrescentVertices(e,t,r,n,a,o,i){if(a<=0)throw new Error("subdivisionDown must be > 0");const s=2,u=(i=i||1)-(o=o||0),c=2*(a+1)*(2+s),f=createAugmentedTypedArray(3,c),l=createAugmentedTypedArray(3,c),m=createAugmentedTypedArray(2,c);function T(t,r,i,c,T,E){for(let p=0;p<=a;p++){const y=r/(s-1),_=p/a,d=2*(y-.5),R=(o+_*u)*Math.PI,F=Math.sin(R),S=Math.cos(R),I=(A=e)+(t-A)*F,b=d*n,N=S*e,g=F*I;f.push(b,N,g);const x=add(multiply([0,F,S],i),c);l.push(x),m.push(y*T+E,_)}var A}for(let e=0;e<s;e++){const n=2*(e/(s-1)-.5);T(t,e,[1,1,1],[0,0,0],1,0),T(t,e,[0,0,0],[n,0,0],0,0),T(r,e,[1,1,1],[0,0,0],1,0),T(r,e,[0,0,0],[n,0,0],0,1)}const E=createAugmentedTypedArray(3,2*a*(2+s),Uint16Array);function A(e,t){for(let r=0;r<a;++r)E.push(e+r+0,e+r+1,t+r+0),E.push(e+r+1,t+r+1,t+r+0)}const p=a+1;return A(0*p,4*p),A(5*p,7*p),A(6*p,2*p),A(3*p,1*p),{position:f,normal:l,texcoord:m,indices:E}}function createCylinderVertices(e,t,r,n,a,o){return createTruncatedConeVertices(e,e,t,r,n,a,o)}function createTorusVertices(e,t,r,n,a,o){if(r<3)throw new Error("radialSubdivisions must be 3 or greater");if(n<3)throw new Error("verticalSubdivisions must be 3 or greater");a=a||0;const i=(o=o||2*Math.PI)-a,s=r+1,u=n+1,c=s*u,f=createAugmentedTypedArray(3,c),l=createAugmentedTypedArray(3,c),m=createAugmentedTypedArray(2,c),T=createAugmentedTypedArray(3,r*n*2,Uint16Array);for(let o=0;o<u;++o){const u=o/n,c=u*Math.PI*2,T=Math.sin(c),E=e+T*t,A=Math.cos(c),p=A*t;for(let e=0;e<s;++e){const t=e/r,n=a+t*i,o=Math.sin(n),s=Math.cos(n),c=o*E,y=s*E,_=o*T,d=s*T;f.push(c,p,y),l.push(_,A,d),m.push(t,1-u)}}for(let e=0;e<n;++e)for(let t=0;t<r;++t){const r=1+t,n=1+e;T.push(s*e+t,s*n+t,s*e+r),T.push(s*n+t,s*n+r,s*e+r)}return{position:f,normal:l,texcoord:m,indices:T}}function createDiscVertices(e,t,r,n,a){if(t<3)throw new Error("divisions must be at least 3");a=a||1,n=n||0;const o=(t+1)*((r=r||1)+1),i=createAugmentedTypedArray(3,o),s=createAugmentedTypedArray(3,o),u=createAugmentedTypedArray(2,o),c=createAugmentedTypedArray(3,r*t*2,Uint16Array);let f=0;const l=e-n,m=t+1;for(let e=0;e<=r;++e){const o=n+l*Math.pow(e/r,a);for(let n=0;n<=t;++n){const a=2*Math.PI*n/t,l=o*Math.cos(a),T=o*Math.sin(a);if(i.push(l,0,T),s.push(0,1,0),u.push(1-n/t,e/r),e>0&&n!==t){const e=f+(n+1),t=f+n,r=f+n-m,a=f+(n+1)-m;c.push(e,t,r),c.push(e,r,a)}}f+=t+1}return{position:i,normal:s,texcoord:u,indices:c}}function randInt(e){return Math.random()*e|0}function makeRandomVertexColors(e,t){t=t||{};const r=e.position.numElements,n=createAugmentedTypedArray(4,r,Uint8Array),a=t.rand||function(e,t){return t<3?randInt(256):255};if(e.color=n,e.indices)for(let e=0;e<r;++e)n.push(a(e,0),a(e,1),a(e,2),a(e,3));else{const e=t.vertsPerColor||3,o=r/e;for(let t=0;t<o;++t){const r=[a(t,0),a(t,1),a(t,2),a(t,3)];for(let t=0;t<e;++t)n.push(r)}}return e}function createBufferFunc(e){return function(t){return createBuffersFromArrays(t,e.apply(this,Array.prototype.slice.call(arguments,1)))}}function createBufferInfoFunc(e){return function(t){return createBufferInfoFromArrays(t,e.apply(null,Array.prototype.slice.call(arguments,1)))}}const arraySpecPropertyNames=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function copyElements(e,t,r,n){n=n||0;const a=e.length;for(let o=0;o<a;++o)t[r+o]=e[o]+n}function createArrayOfSameType(e,t){const r=getArray$1(e),n=new r.constructor(t);let a=n;return r.numComponents&&r.numElements&&augmentTypedArray(n,r.numComponents),e.data&&copyNamedProperties(arraySpecPropertyNames,e,a={data:n}),a}function concatVertices(e){const t={};let r;for(let n=0;n<e.length;++n){const a=e[n];Object.keys(a).forEach(function(e){t[e]||(t[e]=[]),r||"indices"===e||(r=e);const n=a[e],o=getNumComponents$1(n,e),i=getArray$1(n).length/o;t[e].push(i)})}const n=t[r],a={};return Object.keys(t).forEach(function(t){const r=function(t){let r,n=0;for(let a=0;a<e.length;++a){const o=e[a][t];n+=getArray$1(o).length,r&&!o.data||(r=o)}return{length:n,spec:r}}(t),o=createArrayOfSameType(r.spec,r.length);!function(t,r,n){let a=0,o=0;for(let i=0;i<e.length;++i){const s=e[i][t],u=getArray$1(s);"indices"===t?(copyElements(u,n,o,a),a+=r[i]):copyElements(u,n,o),o+=u.length}}(t,n,getArray$1(o)),a[t]=o}),a}function duplicateVertices(e){const t={};return Object.keys(e).forEach(function(r){const n=e[r],a=getArray$1(n),o=createArrayOfSameType(n,a.length);copyElements(a,getArray$1(o),0),t[r]=o}),t}const create3DFBufferInfo=createBufferInfoFunc(create3DFVertices),create3DFBuffers=createBufferFunc(create3DFVertices),createCubeBufferInfo=createBufferInfoFunc(createCubeVertices),createCubeBuffers=createBufferFunc(createCubeVertices),createPlaneBufferInfo=createBufferInfoFunc(createPlaneVertices),createPlaneBuffers=createBufferFunc(createPlaneVertices),createSphereBufferInfo=createBufferInfoFunc(createSphereVertices),createSphereBuffers=createBufferFunc(createSphereVertices),createTruncatedConeBufferInfo=createBufferInfoFunc(createTruncatedConeVertices),createTruncatedConeBuffers=createBufferFunc(createTruncatedConeVertices),createXYQuadBufferInfo=createBufferInfoFunc(createXYQuadVertices),createXYQuadBuffers=createBufferFunc(createXYQuadVertices),createCrescentBufferInfo=createBufferInfoFunc(createCrescentVertices),createCrescentBuffers=createBufferFunc(createCrescentVertices),createCylinderBufferInfo=createBufferInfoFunc(createCylinderVertices),createCylinderBuffers=createBufferFunc(createCylinderVertices),createTorusBufferInfo=createBufferInfoFunc(createTorusVertices),createTorusBuffers=createBufferFunc(createTorusVertices),createDiscBufferInfo=createBufferInfoFunc(createDiscVertices),createDiscBuffers=createBufferFunc(createDiscVertices),createCresentBufferInfo=createCrescentBufferInfo,createCresentBuffers=createCrescentBuffers,createCresentVertices=createCrescentVertices;var primitives=Object.freeze({__proto__:null,create3DFBufferInfo:create3DFBufferInfo,create3DFBuffers:create3DFBuffers,create3DFVertices:create3DFVertices,createAugmentedTypedArray:createAugmentedTypedArray,createCubeBufferInfo:createCubeBufferInfo,createCubeBuffers:createCubeBuffers,createCubeVertices:createCubeVertices,createPlaneBufferInfo:createPlaneBufferInfo,createPlaneBuffers:createPlaneBuffers,createPlaneVertices:createPlaneVertices,createSphereBufferInfo:createSphereBufferInfo,createSphereBuffers:createSphereBuffers,createSphereVertices:createSphereVertices,createTruncatedConeBufferInfo:createTruncatedConeBufferInfo,createTruncatedConeBuffers:createTruncatedConeBuffers,createTruncatedConeVertices:createTruncatedConeVertices,createXYQuadBufferInfo:createXYQuadBufferInfo,createXYQuadBuffers:createXYQuadBuffers,createXYQuadVertices:createXYQuadVertices,createCresentBufferInfo:createCresentBufferInfo,createCresentBuffers:createCresentBuffers,createCresentVertices:createCresentVertices,createCrescentBufferInfo:createCrescentBufferInfo,createCrescentBuffers:createCrescentBuffers,createCrescentVertices:createCrescentVertices,createCylinderBufferInfo:createCylinderBufferInfo,createCylinderBuffers:createCylinderBuffers,createCylinderVertices:createCylinderVertices,createTorusBufferInfo:createTorusBufferInfo,createTorusBuffers:createTorusBuffers,createTorusVertices:createTorusVertices,createDiscBufferInfo:createDiscBufferInfo,createDiscBuffers:createDiscBuffers,createDiscVertices:createDiscVertices,deindexVertices:deindexVertices,flattenNormals:flattenNormals,makeRandomVertexColors:makeRandomVertexColors,reorientDirections:reorientDirections,reorientNormals:reorientNormals,reorientPositions:reorientPositions,reorientVertices:reorientVertices,concatVertices:concatVertices,duplicateVertices:duplicateVertices});function isWebGL2(e){return!!e.texStorage2D}function isWebGL1(e){return!e.texStorage2D}const glEnumToString=function(){const e={},t={};return function(r,n){return function(r){const n=r.constructor.name;if(!e[n]){for(const e in r)if("number"==typeof r[e]){const n=t[r[e]];t[r[e]]=n?`${n} | ${e}`:e}e[n]=!0}}(r),t[n]||"0x"+n.toString(16)}}();var utils=Object.freeze({__proto__:null,glEnumToString:glEnumToString,isWebGL1:isWebGL1,isWebGL2:isWebGL2});const defaults$1={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},isArrayBuffer$1=isArrayBuffer,getShared2DContext=function(){let e;return function(){return e=e||("undefined"!=typeof document&&document.createElement?document.createElement("canvas").getContext("2d"):null)}}(),ALPHA=6406,RGB=6407,RGBA=6408,LUMINANCE=6409,LUMINANCE_ALPHA=6410,DEPTH_COMPONENT=6402,DEPTH_STENCIL=34041,CLAMP_TO_EDGE=33071,NEAREST=9728,LINEAR=9729,TEXTURE_2D=3553,TEXTURE_CUBE_MAP=34067,TEXTURE_3D=32879,TEXTURE_2D_ARRAY=35866,TEXTURE_CUBE_MAP_POSITIVE_X=34069,TEXTURE_CUBE_MAP_NEGATIVE_X=34070,TEXTURE_CUBE_MAP_POSITIVE_Y=34071,TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,TEXTURE_CUBE_MAP_POSITIVE_Z=34073,TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,TEXTURE_MIN_FILTER=10241,TEXTURE_MAG_FILTER=10240,TEXTURE_WRAP_S=10242,TEXTURE_WRAP_T=10243,TEXTURE_WRAP_R=32882,TEXTURE_MIN_LOD=33082,TEXTURE_MAX_LOD=33083,TEXTURE_BASE_LEVEL=33084,TEXTURE_MAX_LEVEL=33085,UNPACK_ALIGNMENT=3317,UNPACK_ROW_LENGTH=3314,UNPACK_IMAGE_HEIGHT=32878,UNPACK_SKIP_PIXELS=3316,UNPACK_SKIP_ROWS=3315,UNPACK_SKIP_IMAGES=32877,UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,UNPACK_FLIP_Y_WEBGL=37440,R8=33321,R8_SNORM=36756,R16F=33325,R32F=33326,R8UI=33330,R8I=33329,RG16UI=33338,RG16I=33337,RG32UI=33340,RG32I=33339,RG8=33323,RG8_SNORM=36757,RG16F=33327,RG32F=33328,RG8UI=33336,RG8I=33335,R16UI=33332,R16I=33331,R32UI=33334,R32I=33333,RGB8=32849,SRGB8=35905,RGB565=36194,RGB8_SNORM=36758,R11F_G11F_B10F=35898,RGB9_E5=35901,RGB16F=34843,RGB32F=34837,RGB8UI=36221,RGB8I=36239,RGB16UI=36215,RGB16I=36233,RGB32UI=36209,RGB32I=36227,RGBA8=32856,SRGB8_ALPHA8=35907,RGBA8_SNORM=36759,RGB5_A1=32855,RGBA4=32854,RGB10_A2=32857,RGBA16F=34842,RGBA32F=34836,RGBA8UI=36220,RGBA8I=36238,RGB10_A2UI=36975,RGBA16UI=36214,RGBA16I=36232,RGBA32I=36226,RGBA32UI=36208,DEPTH_COMPONENT16=33189,DEPTH_COMPONENT24=33190,DEPTH_COMPONENT32F=36012,DEPTH32F_STENCIL8=36013,DEPTH24_STENCIL8=35056,BYTE$2=5120,UNSIGNED_BYTE$2=5121,SHORT$2=5122,UNSIGNED_SHORT$2=5123,INT$2=5124,UNSIGNED_INT$2=5125,FLOAT$2=5126,UNSIGNED_SHORT_4_4_4_4$1=32819,UNSIGNED_SHORT_5_5_5_1$1=32820,UNSIGNED_SHORT_5_6_5$1=33635,HALF_FLOAT$1=5131,HALF_FLOAT_OES=36193,UNSIGNED_INT_2_10_10_10_REV$1=33640,UNSIGNED_INT_10F_11F_11F_REV$1=35899,UNSIGNED_INT_5_9_9_9_REV$1=35902,FLOAT_32_UNSIGNED_INT_24_8_REV$1=36269,UNSIGNED_INT_24_8$1=34042,RG=33319,RG_INTEGER=33320,RED=6403,RED_INTEGER=36244,RGB_INTEGER=36248,RGBA_INTEGER=36249,formatInfo={};{const e=formatInfo;e[ALPHA]={numColorComponents:1},e[LUMINANCE]={numColorComponents:1},e[LUMINANCE_ALPHA]={numColorComponents:2},e[RGB]={numColorComponents:3},e[RGBA]={numColorComponents:4},e[RED]={numColorComponents:1},e[RED_INTEGER]={numColorComponents:1},e[RG]={numColorComponents:2},e[RG_INTEGER]={numColorComponents:2},e[RGB]={numColorComponents:3},e[RGB_INTEGER]={numColorComponents:3},e[RGBA]={numColorComponents:4},e[RGBA_INTEGER]={numColorComponents:4},e[DEPTH_COMPONENT]={numColorComponents:1},e[DEPTH_STENCIL]={numColorComponents:2}}let s_textureInternalFormatInfo;function getTextureInternalFormatInfo(e){if(!s_textureInternalFormatInfo){const e={};e[ALPHA]={textureFormat:ALPHA,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[UNSIGNED_BYTE$2,HALF_FLOAT$1,HALF_FLOAT_OES,FLOAT$2]},e[LUMINANCE]={textureFormat:LUMINANCE,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[UNSIGNED_BYTE$2,HALF_FLOAT$1,HALF_FLOAT_OES,FLOAT$2]},e[LUMINANCE_ALPHA]={textureFormat:LUMINANCE_ALPHA,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[UNSIGNED_BYTE$2,HALF_FLOAT$1,HALF_FLOAT_OES,FLOAT$2]},e[RGB]={textureFormat:RGB,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[UNSIGNED_BYTE$2,HALF_FLOAT$1,HALF_FLOAT_OES,FLOAT$2,UNSIGNED_SHORT_5_6_5$1]},e[RGBA]={textureFormat:RGBA,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[UNSIGNED_BYTE$2,HALF_FLOAT$1,HALF_FLOAT_OES,FLOAT$2,UNSIGNED_SHORT_4_4_4_4$1,UNSIGNED_SHORT_5_5_5_1$1]},e[DEPTH_COMPONENT]={textureFormat:DEPTH_COMPONENT,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[UNSIGNED_INT$2,UNSIGNED_SHORT$2]},e[R8]={textureFormat:RED,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[UNSIGNED_BYTE$2]},e[R8_SNORM]={textureFormat:RED,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[BYTE$2]},e[R16F]={textureFormat:RED,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[FLOAT$2,HALF_FLOAT$1]},e[R32F]={textureFormat:RED,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[FLOAT$2]},e[R8UI]={textureFormat:RED_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[UNSIGNED_BYTE$2]},e[R8I]={textureFormat:RED_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[BYTE$2]},e[R16UI]={textureFormat:RED_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[UNSIGNED_SHORT$2]},e[R16I]={textureFormat:RED_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[SHORT$2]},e[R32UI]={textureFormat:RED_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[UNSIGNED_INT$2]},e[R32I]={textureFormat:RED_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[INT$2]},e[RG8]={textureFormat:RG,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[UNSIGNED_BYTE$2]},e[RG8_SNORM]={textureFormat:RG,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[BYTE$2]},e[RG16F]={textureFormat:RG,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[FLOAT$2,HALF_FLOAT$1]},e[RG32F]={textureFormat:RG,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[FLOAT$2]},e[RG8UI]={textureFormat:RG_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[UNSIGNED_BYTE$2]},e[RG8I]={textureFormat:RG_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[BYTE$2]},e[RG16UI]={textureFormat:RG_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[UNSIGNED_SHORT$2]},e[RG16I]={textureFormat:RG_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[SHORT$2]},e[RG32UI]={textureFormat:RG_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[UNSIGNED_INT$2]},e[RG32I]={textureFormat:RG_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[INT$2]},e[RGB8]={textureFormat:RGB,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[UNSIGNED_BYTE$2]},e[SRGB8]={textureFormat:RGB,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[UNSIGNED_BYTE$2]},e[RGB565]={textureFormat:RGB,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[UNSIGNED_BYTE$2,UNSIGNED_SHORT_5_6_5$1]},e[RGB8_SNORM]={textureFormat:RGB,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[BYTE$2]},e[R11F_G11F_B10F]={textureFormat:RGB,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[FLOAT$2,HALF_FLOAT$1,UNSIGNED_INT_10F_11F_11F_REV$1]},e[RGB9_E5]={textureFormat:RGB,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[FLOAT$2,HALF_FLOAT$1,UNSIGNED_INT_5_9_9_9_REV$1]},e[RGB16F]={textureFormat:RGB,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[FLOAT$2,HALF_FLOAT$1]},e[RGB32F]={textureFormat:RGB,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[FLOAT$2]},e[RGB8UI]={textureFormat:RGB_INTEGER,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[UNSIGNED_BYTE$2]},e[RGB8I]={textureFormat:RGB_INTEGER,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[BYTE$2]},e[RGB16UI]={textureFormat:RGB_INTEGER,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[UNSIGNED_SHORT$2]},e[RGB16I]={textureFormat:RGB_INTEGER,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[SHORT$2]},e[RGB32UI]={textureFormat:RGB_INTEGER,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[UNSIGNED_INT$2]},e[RGB32I]={textureFormat:RGB_INTEGER,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[INT$2]},e[RGBA8]={textureFormat:RGBA,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[UNSIGNED_BYTE$2]},e[SRGB8_ALPHA8]={textureFormat:RGBA,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[UNSIGNED_BYTE$2]},e[RGBA8_SNORM]={textureFormat:RGBA,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[BYTE$2]},e[RGB5_A1]={textureFormat:RGBA,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[UNSIGNED_BYTE$2,UNSIGNED_SHORT_5_5_5_1$1,UNSIGNED_INT_2_10_10_10_REV$1]},e[RGBA4]={textureFormat:RGBA,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[UNSIGNED_BYTE$2,UNSIGNED_SHORT_4_4_4_4$1]},e[RGB10_A2]={textureFormat:RGBA,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[UNSIGNED_INT_2_10_10_10_REV$1]},e[RGBA16F]={textureFormat:RGBA,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[FLOAT$2,HALF_FLOAT$1]},e[RGBA32F]={textureFormat:RGBA,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[FLOAT$2]},e[RGBA8UI]={textureFormat:RGBA_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[UNSIGNED_BYTE$2]},e[RGBA8I]={textureFormat:RGBA_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[BYTE$2]},e[RGB10_A2UI]={textureFormat:RGBA_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[UNSIGNED_INT_2_10_10_10_REV$1]},e[RGBA16UI]={textureFormat:RGBA_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[UNSIGNED_SHORT$2]},e[RGBA16I]={textureFormat:RGBA_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[SHORT$2]},e[RGBA32I]={textureFormat:RGBA_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[INT$2]},e[RGBA32UI]={textureFormat:RGBA_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[UNSIGNED_INT$2]},e[DEPTH_COMPONENT16]={textureFormat:DEPTH_COMPONENT,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[UNSIGNED_SHORT$2,UNSIGNED_INT$2]},e[DEPTH_COMPONENT24]={textureFormat:DEPTH_COMPONENT,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[UNSIGNED_INT$2]},e[DEPTH_COMPONENT32F]={textureFormat:DEPTH_COMPONENT,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[FLOAT$2]},e[DEPTH24_STENCIL8]={textureFormat:DEPTH_STENCIL,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[UNSIGNED_INT_24_8$1]},e[DEPTH32F_STENCIL8]={textureFormat:DEPTH_STENCIL,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[FLOAT_32_UNSIGNED_INT_24_8_REV$1]},Object.keys(e).forEach(function(t){const r=e[t];r.bytesPerElementMap={},r.bytesPerElement.forEach(function(e,t){const n=r.type[t];r.bytesPerElementMap[n]=e})}),s_textureInternalFormatInfo=e}return s_textureInternalFormatInfo[e]}function getBytesPerElementForInternalFormat(e,t){const r=getTextureInternalFormatInfo(e);if(!r)throw"unknown internal format";const n=r.bytesPerElementMap[t];if(void 0===n)throw"unknown internal format";return n}function getFormatAndTypeForInternalFormat(e){const t=getTextureInternalFormatInfo(e);if(!t)throw"unknown internal format";return{format:t.textureFormat,type:t.type[0]}}function isPowerOf2(e){return 0==(e&e-1)}function canGenerateMipmap(e,t,r,n){if(!isWebGL2(e))return isPowerOf2(t)&&isPowerOf2(r);const a=getTextureInternalFormatInfo(n);if(!a)throw"unknown internal format";return a.colorRenderable&&a.textureFilterable}function canFilter(e){const t=getTextureInternalFormatInfo(e);if(!t)throw"unknown internal format";return t.textureFilterable}function getNumComponentsForFormat(e){const t=formatInfo[e];if(!t)throw"unknown format: "+e;return t.numColorComponents}function getTextureTypeForArrayType(e,t,r){return isArrayBuffer$1(t)?getGLTypeForTypedArray(t):r||UNSIGNED_BYTE$2}function guessDimensions(e,t,r,n,a){if(a%1!=0)throw"can't guess dimensions";if(r||n){if(n){if(!r&&(r=a/n)%1)throw"can't guess dimensions"}else if((n=a/r)%1)throw"can't guess dimensions"}else{const e=Math.sqrt(a/(t===TEXTURE_CUBE_MAP?6:1));e%1==0?(r=e,n=e):(r=a,n=1)}return{width:r,height:n}}function setDefaultTextureColor(e){defaults$1.textureColor=new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}function setDefaults$1(e){copyExistingProperties(e,defaults$1),e.textureColor&&setDefaultTextureColor(e.textureColor)}const lastPackState={};function savePackState(e,t){void 0!==t.colorspaceConversion&&(lastPackState.colorspaceConversion=e.getParameter(UNPACK_COLORSPACE_CONVERSION_WEBGL),e.pixelStorei(UNPACK_COLORSPACE_CONVERSION_WEBGL,t.colorspaceConversion)),void 0!==t.premultiplyAlpha&&(lastPackState.premultiplyAlpha=e.getParameter(UNPACK_PREMULTIPLY_ALPHA_WEBGL),e.pixelStorei(UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha)),void 0!==t.flipY&&(lastPackState.flipY=e.getParameter(UNPACK_FLIP_Y_WEBGL),e.pixelStorei(UNPACK_FLIP_Y_WEBGL,t.flipY))}function restorePackState(e,t){void 0!==t.colorspaceConversion&&e.pixelStorei(UNPACK_COLORSPACE_CONVERSION_WEBGL,lastPackState.colorspaceConversion),void 0!==t.premultiplyAlpha&&e.pixelStorei(UNPACK_PREMULTIPLY_ALPHA_WEBGL,lastPackState.premultiplyAlpha),void 0!==t.flipY&&e.pixelStorei(UNPACK_FLIP_Y_WEBGL,lastPackState.flipY)}function saveSkipState(e){lastPackState.unpackAlignment=e.getParameter(UNPACK_ALIGNMENT),isWebGL2(e)&&(lastPackState.unpackRowLength=e.getParameter(UNPACK_ROW_LENGTH),lastPackState.unpackImageHeight=e.getParameter(UNPACK_IMAGE_HEIGHT),lastPackState.unpackSkipPixels=e.getParameter(UNPACK_SKIP_PIXELS),lastPackState.unpackSkipRows=e.getParameter(UNPACK_SKIP_ROWS),lastPackState.unpackSkipImages=e.getParameter(UNPACK_SKIP_IMAGES))}function restoreSkipState(e){e.pixelStorei(UNPACK_ALIGNMENT,lastPackState.unpackAlignment),isWebGL2(e)&&(e.pixelStorei(UNPACK_ROW_LENGTH,lastPackState.unpackRowLength),e.pixelStorei(UNPACK_IMAGE_HEIGHT,lastPackState.unpackImageHeight),e.pixelStorei(UNPACK_SKIP_PIXELS,lastPackState.unpackSkipPixels),e.pixelStorei(UNPACK_SKIP_ROWS,lastPackState.unpackSkipRows),e.pixelStorei(UNPACK_SKIP_IMAGES,lastPackState.unpackSkipImages))}function setTextureSamplerParameters(e,t,r,n){n.minMag&&(r.call(e,t,TEXTURE_MIN_FILTER,n.minMag),r.call(e,t,TEXTURE_MAG_FILTER,n.minMag)),n.min&&r.call(e,t,TEXTURE_MIN_FILTER,n.min),n.mag&&r.call(e,t,TEXTURE_MAG_FILTER,n.mag),n.wrap&&(r.call(e,t,TEXTURE_WRAP_S,n.wrap),r.call(e,t,TEXTURE_WRAP_T,n.wrap),(t===TEXTURE_3D||isSampler(e,t))&&r.call(e,t,TEXTURE_WRAP_R,n.wrap)),n.wrapR&&r.call(e,t,TEXTURE_WRAP_R,n.wrapR),n.wrapS&&r.call(e,t,TEXTURE_WRAP_S,n.wrapS),n.wrapT&&r.call(e,t,TEXTURE_WRAP_T,n.wrapT),n.minLod&&r.call(e,t,TEXTURE_MIN_LOD,n.minLod),n.maxLod&&r.call(e,t,TEXTURE_MAX_LOD,n.maxLod),n.baseLevel&&r.call(e,t,TEXTURE_BASE_LEVEL,n.baseLevel),n.maxLevel&&r.call(e,t,TEXTURE_MAX_LEVEL,n.maxLevel)}function setTextureParameters(e,t,r){const n=r.target||TEXTURE_2D;e.bindTexture(n,t),setTextureSamplerParameters(e,n,e.texParameteri,r)}function setSamplerParameters(e,t,r){setTextureSamplerParameters(e,t,e.samplerParameteri,r)}function createSampler(e,t){const r=e.createSampler();return setSamplerParameters(e,r,t),r}function createSamplers(e,t){const r={};return Object.keys(t).forEach(function(n){r[n]=createSampler(e,t[n])}),r}function make1Pixel(e){return e=e||defaults$1.textureColor,isArrayBuffer$1(e)?e:new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}function setTextureFilteringForSize(e,t,r,n,a,o){r=r||defaults$1.textureOptions,o=o||RGBA;const i=r.target||TEXTURE_2D;if(n=n||r.width,a=a||r.height,e.bindTexture(i,t),canGenerateMipmap(e,n,a,o))e.generateMipmap(i);else{const t=canFilter(o)?LINEAR:NEAREST;e.texParameteri(i,TEXTURE_MIN_FILTER,t),e.texParameteri(i,TEXTURE_MAG_FILTER,t),e.texParameteri(i,TEXTURE_WRAP_S,CLAMP_TO_EDGE),e.texParameteri(i,TEXTURE_WRAP_T,CLAMP_TO_EDGE)}}function shouldAutomaticallySetTextureFilteringForSize(e){return!0===e.auto||void 0===e.auto&&void 0===e.level}function getCubeFaceOrder(e,t){return(t=t||{}).cubeFaceOrder||[TEXTURE_CUBE_MAP_POSITIVE_X,TEXTURE_CUBE_MAP_NEGATIVE_X,TEXTURE_CUBE_MAP_POSITIVE_Y,TEXTURE_CUBE_MAP_NEGATIVE_Y,TEXTURE_CUBE_MAP_POSITIVE_Z,TEXTURE_CUBE_MAP_NEGATIVE_Z]}function getCubeFacesWithNdx(e,t){const r=getCubeFaceOrder(e,t).map(function(e,t){return{face:e,ndx:t}});return r.sort(function(e,t){return e.face-t.face}),r}function setTextureFromElement(e,t,r,n){const a=(n=n||defaults$1.textureOptions).target||TEXTURE_2D,o=n.level||0;let i=r.width,s=r.height;const u=n.internalFormat||n.format||RGBA,c=getFormatAndTypeForInternalFormat(u),f=n.format||c.format,l=n.type||c.type;if(savePackState(e,n),e.bindTexture(a,t),a===TEXTURE_CUBE_MAP){const c=r.width,m=r.height;let T,E;if(c/6===m)T=m,E=[0,0,1,0,2,0,3,0,4,0,5,0];else if(m/6===c)T=c,E=[0,0,0,1,0,2,0,3,0,4,0,5];else if(c/3==m/2)T=c/3,E=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(c/2!=m/3)throw"can't figure out cube map from element: "+(r.src?r.src:r.nodeName);T=c/2,E=[0,0,1,0,0,1,1,1,0,2,1,2]}const A=getShared2DContext();A?(A.canvas.width=T,A.canvas.height=T,i=T,s=T,getCubeFacesWithNdx(e,n).forEach(function(t){const n=E[2*t.ndx+0]*T,a=E[2*t.ndx+1]*T;A.drawImage(r,n,a,T,T,0,0,T,T),e.texImage2D(t.face,o,u,f,l,A.canvas)}),A.canvas.width=1,A.canvas.height=1):"undefined"!=typeof createImageBitmap&&(i=T,s=T,getCubeFacesWithNdx(e,n).forEach(function(c){const m=E[2*c.ndx+0]*T,A=E[2*c.ndx+1]*T;e.texImage2D(c.face,o,u,T,T,0,f,l,null),createImageBitmap(r,m,A,T,T,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(r){savePackState(e,n),e.bindTexture(a,t),e.texImage2D(c.face,o,u,f,l,r),restorePackState(e,n),shouldAutomaticallySetTextureFilteringForSize(n)&&setTextureFilteringForSize(e,t,n,i,s,u)})}))}else if(a===TEXTURE_3D||a===TEXTURE_2D_ARRAY){const t=Math.min(r.width,r.height),n=Math.max(r.width,r.height),i=n/t;if(i%1!=0)throw"can not compute 3D dimensions of element";const s=r.width===n?1:0,c=r.height===n?1:0;saveSkipState(e),e.pixelStorei(UNPACK_ALIGNMENT,1),e.pixelStorei(UNPACK_ROW_LENGTH,r.width),e.pixelStorei(UNPACK_IMAGE_HEIGHT,0),e.pixelStorei(UNPACK_SKIP_IMAGES,0),e.texImage3D(a,o,u,t,t,t,0,f,l,null);for(let n=0;n<i;++n){const i=n*t*s,u=n*t*c;e.pixelStorei(UNPACK_SKIP_PIXELS,i),e.pixelStorei(UNPACK_SKIP_ROWS,u),e.texSubImage3D(a,o,0,0,n,t,t,1,f,l,r)}restoreSkipState(e)}else e.texImage2D(a,o,u,f,l,r);restorePackState(e,n),shouldAutomaticallySetTextureFilteringForSize(n)&&setTextureFilteringForSize(e,t,n,i,s,u),setTextureParameters(e,t,n)}function noop(){}function urlIsSameOrigin(e){if("undefined"!=typeof document){const t=document.createElement("a");return t.href=e,t.hostname===location.hostname&&t.port===location.port&&t.protocol===location.protocol}{const t=new URL(location.href).origin;return new URL(e,location.href).origin===t}}function setToAnonymousIfUndefinedAndURLIsNotSameOrigin(e,t){return void 0!==t||urlIsSameOrigin(e)?t:"anonymous"}function loadImage(e,t,r){let n;if(r=r||noop,t=void 0!==t?t:defaults$1.crossOrigin,t=setToAnonymousIfUndefinedAndURLIsNotSameOrigin(e,t),"undefined"!=typeof Image){n=new Image,void 0!==t&&(n.crossOrigin=t);const a=function(){n.removeEventListener("error",o),n.removeEventListener("load",i),n=null},o=function(){const t="couldn't load image: "+e;error(t),r(t,n),a()},i=function(){r(null,n),a()};return n.addEventListener("error",o),n.addEventListener("load",i),n.src=e,n}if("undefined"!=typeof ImageBitmap){let a,o;const i=function(){r(a,o)},s={};t&&(s.mode="cors"),fetch(e,s).then(function(e){if(!e.ok)throw e;return e.blob()}).then(function(e){return createImageBitmap(e,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(e){o=e,setTimeout(i)}).catch(function(e){a=e,setTimeout(i)}),n=null}return n}function isTexImageSource(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof ImageData&&e instanceof ImageData||"undefined"!=typeof HTMLElement&&e instanceof HTMLElement}function loadAndUseImage(e,t,r){return isTexImageSource(e)?(setTimeout(function(){r(null,e)}),e):loadImage(e,t,r)}function setTextureTo1PixelColor(e,t,r){const n=(r=r||defaults$1.textureOptions).target||TEXTURE_2D;if(e.bindTexture(n,t),!1===r.color)return;const a=make1Pixel(r.color);if(n===TEXTURE_CUBE_MAP)for(let t=0;t<6;++t)e.texImage2D(TEXTURE_CUBE_MAP_POSITIVE_X+t,0,RGBA,1,1,0,RGBA,UNSIGNED_BYTE$2,a);else n===TEXTURE_3D||n===TEXTURE_2D_ARRAY?e.texImage3D(n,0,RGBA,1,1,1,0,RGBA,UNSIGNED_BYTE$2,a):e.texImage2D(n,0,RGBA,1,1,0,RGBA,UNSIGNED_BYTE$2,a)}function loadTextureFromUrl(e,t,r,n){return n=n||noop,r=r||defaults$1.textureOptions,setTextureTo1PixelColor(e,t,r),loadAndUseImage((r=Object.assign({},r)).src,r.crossOrigin,function(a,o){a?n(a,t,o):(setTextureFromElement(e,t,o,r),n(null,t,o))})}function loadCubemapFromUrls(e,t,r,n){n=n||noop;const a=r.src;if(6!==a.length)throw"there must be 6 urls for a cubemap";const o=r.level||0,i=r.internalFormat||r.format||RGBA,s=getFormatAndTypeForInternalFormat(i),u=r.format||s.format,c=r.type||UNSIGNED_BYTE$2,f=r.target||TEXTURE_2D;if(f!==TEXTURE_CUBE_MAP)throw"target must be TEXTURE_CUBE_MAP";setTextureTo1PixelColor(e,t,r),r=Object.assign({},r);let l=6;const m=[],T=getCubeFaceOrder(e,r);let E;E=a.map(function(a,s){return loadAndUseImage(a,r.crossOrigin,(A=T[s],function(a,s){--l,a?m.push(a):s.width!==s.height?m.push("cubemap face img is not a square: "+s.src):(savePackState(e,r),e.bindTexture(f,t),5===l?getCubeFaceOrder().forEach(function(t){e.texImage2D(t,o,i,u,c,s)}):e.texImage2D(A,o,i,u,c,s),restorePackState(e,r),shouldAutomaticallySetTextureFilteringForSize(r)&&e.generateMipmap(f)),0===l&&n(m.length?m:void 0,t,E)}));var A})}function loadSlicesFromUrls(e,t,r,n){n=n||noop;const a=r.src,o=r.internalFormat||r.format||RGBA,i=getFormatAndTypeForInternalFormat(o),s=r.format||i.format,u=r.type||UNSIGNED_BYTE$2,c=r.target||TEXTURE_2D_ARRAY;if(c!==TEXTURE_3D&&c!==TEXTURE_2D_ARRAY)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";setTextureTo1PixelColor(e,t,r),r=Object.assign({},r);let f=a.length;const l=[];let m;const T=r.level||0;let E=r.width,A=r.height;const p=a.length;let y=!0;m=a.map(function(a,i){return loadAndUseImage(a,r.crossOrigin,(_=i,function(a,i){if(--f,a)l.push(a);else{if(savePackState(e,r),e.bindTexture(c,t),y){y=!1,E=r.width||i.width,A=r.height||i.height,e.texImage3D(c,T,o,E,A,p,0,s,u,null);for(let t=0;t<p;++t)e.texSubImage3D(c,T,0,0,t,E,A,1,s,u,i)}else{let t,r=i;i.width===E&&i.height===A||(r=(t=getShared2DContext()).canvas,t.canvas.width=E,t.canvas.height=A,t.drawImage(i,0,0,E,A)),e.texSubImage3D(c,T,0,0,_,E,A,1,s,u,r),t&&r===t.canvas&&(t.canvas.width=0,t.canvas.height=0)}restorePackState(e,r),shouldAutomaticallySetTextureFilteringForSize(r)&&e.generateMipmap(c)}0===f&&n(l.length?l:void 0,t,m)}));var _})}function setTextureFromArray(e,t,r,n){const a=(n=n||defaults$1.textureOptions).target||TEXTURE_2D;e.bindTexture(a,t);let o=n.width,i=n.height,s=n.depth;const u=n.level||0,c=n.internalFormat||n.format||RGBA,f=getFormatAndTypeForInternalFormat(c),l=n.format||f.format,m=n.type||getTextureTypeForArrayType(e,r,f.type);if(isArrayBuffer$1(r))r instanceof Uint8ClampedArray&&(r=new Uint8Array(r.buffer));else{const e=getTypedArrayTypeForGLType(m);r=new e(r)}const T=getBytesPerElementForInternalFormat(c,m),E=r.byteLength/T;if(E%1)throw"length wrong size for format: "+glEnumToString(e,l);let A;if(a===TEXTURE_3D||a===TEXTURE_2D_ARRAY)if(o||i||s)!o||i&&s?!i||o&&s?(A=guessDimensions(e,a,o,i,E/s),o=A.width,i=A.height):(A=guessDimensions(e,a,o,s,E/i),o=A.width,s=A.height):(A=guessDimensions(e,a,i,s,E/o),i=A.width,s=A.height);else{const e=Math.cbrt(E);if(e%1!=0)throw"can't guess cube size of array of numElements: "+E;o=e,i=e,s=e}else A=guessDimensions(e,a,o,i,E),o=A.width,i=A.height;if(saveSkipState(e),e.pixelStorei(UNPACK_ALIGNMENT,n.unpackAlignment||1),savePackState(e,n),a===TEXTURE_CUBE_MAP){const t=E/6*(T/r.BYTES_PER_ELEMENT);getCubeFacesWithNdx(e,n).forEach(n=>{const a=t*n.ndx,s=r.subarray(a,a+t);e.texImage2D(n.face,u,c,o,i,0,l,m,s)})}else a===TEXTURE_3D||a===TEXTURE_2D_ARRAY?e.texImage3D(a,u,c,o,i,s,0,l,m,r):e.texImage2D(a,u,c,o,i,0,l,m,r);return restorePackState(e,n),restoreSkipState(e),{width:o,height:i,depth:s,type:m}}function setEmptyTexture(e,t,r){const n=r.target||TEXTURE_2D;e.bindTexture(n,t);const a=r.level||0,o=r.internalFormat||r.format||RGBA,i=getFormatAndTypeForInternalFormat(o),s=r.format||i.format,u=r.type||i.type;if(savePackState(e,r),n===TEXTURE_CUBE_MAP)for(let t=0;t<6;++t)e.texImage2D(TEXTURE_CUBE_MAP_POSITIVE_X+t,a,o,r.width,r.height,0,s,u,null);else n===TEXTURE_3D||n===TEXTURE_2D_ARRAY?e.texImage3D(n,a,o,r.width,r.height,r.depth,0,s,u,null):e.texImage2D(n,a,o,r.width,r.height,0,s,u,null);restorePackState(e,r)}function createTexture(e,t,r){r=r||noop,t=t||defaults$1.textureOptions;const n=e.createTexture(),a=t.target||TEXTURE_2D;let o=t.width||1,i=t.height||1;const s=t.internalFormat||RGBA;e.bindTexture(a,n),a===TEXTURE_CUBE_MAP&&(e.texParameteri(a,TEXTURE_WRAP_S,CLAMP_TO_EDGE),e.texParameteri(a,TEXTURE_WRAP_T,CLAMP_TO_EDGE));let u=t.src;if(u)if("function"==typeof u&&(u=u(e,t)),"string"==typeof u)loadTextureFromUrl(e,n,t,r);else if(isArrayBuffer$1(u)||Array.isArray(u)&&("number"==typeof u[0]||Array.isArray(u[0])||isArrayBuffer$1(u[0]))){const r=setTextureFromArray(e,n,u,t);o=r.width,i=r.height}else Array.isArray(u)&&("string"==typeof u[0]||isTexImageSource(u[0]))?a===TEXTURE_CUBE_MAP?loadCubemapFromUrls(e,n,t,r):loadSlicesFromUrls(e,n,t,r):(setTextureFromElement(e,n,u,t),o=u.width,i=u.height);else setEmptyTexture(e,n,t);return shouldAutomaticallySetTextureFilteringForSize(t)&&setTextureFilteringForSize(e,n,t,o,i,s),setTextureParameters(e,n,t),n}function resizeTexture(e,t,r,n,a,o){n=n||r.width,a=a||r.height,o=o||r.depth;const i=r.target||TEXTURE_2D;e.bindTexture(i,t);const s=r.level||0,u=r.internalFormat||r.format||RGBA,c=getFormatAndTypeForInternalFormat(u),f=r.format||c.format;let l;const m=r.src;if(l=m&&(isArrayBuffer$1(m)||Array.isArray(m)&&"number"==typeof m[0])?r.type||getTextureTypeForArrayType(e,m,c.type):r.type||c.type,i===TEXTURE_CUBE_MAP)for(let t=0;t<6;++t)e.texImage2D(TEXTURE_CUBE_MAP_POSITIVE_X+t,s,u,n,a,0,f,l,null);else i===TEXTURE_3D||i===TEXTURE_2D_ARRAY?e.texImage3D(i,s,u,n,a,o,0,f,l,null):e.texImage2D(i,s,u,n,a,0,f,l,null)}function isAsyncSrc(e){return"string"==typeof e||Array.isArray(e)&&"string"==typeof e[0]}function createTextures(e,t,r){r=r||noop;let n=0;const a=[],o={},i={};function s(){0===n&&setTimeout(function(){r(a.length?a:void 0,o,i)},0)}return Object.keys(t).forEach(function(r){const u=t[r];let c;isAsyncSrc(u.src)&&(c=function(e,t,o){i[r]=o,--n,e&&a.push(e),s()},++n),o[r]=createTexture(e,u,c)}),s(),o}var textures=Object.freeze({__proto__:null,setTextureDefaults_:setDefaults$1,createSampler:createSampler,createSamplers:createSamplers,setSamplerParameters:setSamplerParameters,createTexture:createTexture,setEmptyTexture:setEmptyTexture,setTextureFromArray:setTextureFromArray,loadTextureFromUrl:loadTextureFromUrl,setTextureFromElement:setTextureFromElement,setTextureFilteringForSize:setTextureFilteringForSize,setTextureParameters:setTextureParameters,setDefaultTextureColor:setDefaultTextureColor,createTextures:createTextures,resizeTexture:resizeTexture,canGenerateMipmap:canGenerateMipmap,canFilter:canFilter,getNumComponentsForFormat:getNumComponentsForFormat,getBytesPerElementForInternalFormat:getBytesPerElementForInternalFormat,getFormatAndTypeForInternalFormat:getFormatAndTypeForInternalFormat});const error$1=error,warn$1=warn;function getElementById(e){return"undefined"!=typeof document&&document.getElementById?document.getElementById(e):null}const TEXTURE0=33984,DYNAMIC_DRAW=35048,ARRAY_BUFFER$1=34962,ELEMENT_ARRAY_BUFFER$1=34963,UNIFORM_BUFFER=35345,TRANSFORM_FEEDBACK_BUFFER=35982,TRANSFORM_FEEDBACK=36386,COMPILE_STATUS=35713,LINK_STATUS=35714,FRAGMENT_SHADER=35632,VERTEX_SHADER=35633,SEPARATE_ATTRIBS=35981,ACTIVE_UNIFORMS=35718,ACTIVE_ATTRIBUTES=35721,TRANSFORM_FEEDBACK_VARYINGS=35971,ACTIVE_UNIFORM_BLOCKS=35382,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398,UNIFORM_BLOCK_DATA_SIZE=35392,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395,FLOAT$3=5126,FLOAT_VEC2=35664,FLOAT_VEC3=35665,FLOAT_VEC4=35666,INT$3=5124,INT_VEC2=35667,INT_VEC3=35668,INT_VEC4=35669,BOOL=35670,BOOL_VEC2=35671,BOOL_VEC3=35672,BOOL_VEC4=35673,FLOAT_MAT2=35674,FLOAT_MAT3=35675,FLOAT_MAT4=35676,SAMPLER_2D=35678,SAMPLER_CUBE=35680,SAMPLER_3D=35679,SAMPLER_2D_SHADOW=35682,FLOAT_MAT2x3=35685,FLOAT_MAT2x4=35686,FLOAT_MAT3x2=35687,FLOAT_MAT3x4=35688,FLOAT_MAT4x2=35689,FLOAT_MAT4x3=35690,SAMPLER_2D_ARRAY=36289,SAMPLER_2D_ARRAY_SHADOW=36292,SAMPLER_CUBE_SHADOW=36293,UNSIGNED_INT$3=5125,UNSIGNED_INT_VEC2=36294,UNSIGNED_INT_VEC3=36295,UNSIGNED_INT_VEC4=36296,INT_SAMPLER_2D=36298,INT_SAMPLER_3D=36299,INT_SAMPLER_CUBE=36300,INT_SAMPLER_2D_ARRAY=36303,UNSIGNED_INT_SAMPLER_2D=36306,UNSIGNED_INT_SAMPLER_3D=36307,UNSIGNED_INT_SAMPLER_CUBE=36308,UNSIGNED_INT_SAMPLER_2D_ARRAY=36311,TEXTURE_2D$1=3553,TEXTURE_CUBE_MAP$1=34067,TEXTURE_3D$1=32879,TEXTURE_2D_ARRAY$1=35866,typeMap={};function getBindPointForSamplerType(e,t){return typeMap[t].bindPoint}function floatSetter(e,t){return function(r){e.uniform1f(t,r)}}function floatArraySetter(e,t){return function(r){e.uniform1fv(t,r)}}function floatVec2Setter(e,t){return function(r){e.uniform2fv(t,r)}}function floatVec3Setter(e,t){return function(r){e.uniform3fv(t,r)}}function floatVec4Setter(e,t){return function(r){e.uniform4fv(t,r)}}function intSetter(e,t){return function(r){e.uniform1i(t,r)}}function intArraySetter(e,t){return function(r){e.uniform1iv(t,r)}}function intVec2Setter(e,t){return function(r){e.uniform2iv(t,r)}}function intVec3Setter(e,t){return function(r){e.uniform3iv(t,r)}}function intVec4Setter(e,t){return function(r){e.uniform4iv(t,r)}}function uintSetter(e,t){return function(r){e.uniform1ui(t,r)}}function uintArraySetter(e,t){return function(r){e.uniform1uiv(t,r)}}function uintVec2Setter(e,t){return function(r){e.uniform2uiv(t,r)}}function uintVec3Setter(e,t){return function(r){e.uniform3uiv(t,r)}}function uintVec4Setter(e,t){return function(r){e.uniform4uiv(t,r)}}function floatMat2Setter(e,t){return function(r){e.uniformMatrix2fv(t,!1,r)}}function floatMat3Setter(e,t){return function(r){e.uniformMatrix3fv(t,!1,r)}}function floatMat4Setter(e,t){return function(r){e.uniformMatrix4fv(t,!1,r)}}function floatMat23Setter(e,t){return function(r){e.uniformMatrix2x3fv(t,!1,r)}}function floatMat32Setter(e,t){return function(r){e.uniformMatrix3x2fv(t,!1,r)}}function floatMat24Setter(e,t){return function(r){e.uniformMatrix2x4fv(t,!1,r)}}function floatMat42Setter(e,t){return function(r){e.uniformMatrix4x2fv(t,!1,r)}}function floatMat34Setter(e,t){return function(r){e.uniformMatrix3x4fv(t,!1,r)}}function floatMat43Setter(e,t){return function(r){e.uniformMatrix4x3fv(t,!1,r)}}function samplerSetter(e,t,r,n){const a=getBindPointForSamplerType(e,t);return isWebGL2(e)?function(t){let o,i;isTexture(e,t)?(o=t,i=null):(o=t.texture,i=t.sampler),e.uniform1i(n,r),e.activeTexture(TEXTURE0+r),e.bindTexture(a,o),e.bindSampler(r,i)}:function(t){e.uniform1i(n,r),e.activeTexture(TEXTURE0+r),e.bindTexture(a,t)}}function samplerArraySetter(e,t,r,n,a){const o=getBindPointForSamplerType(e,t),i=new Int32Array(a);for(let e=0;e<a;++e)i[e]=r+e;return isWebGL2(e)?function(t){e.uniform1iv(n,i),t.forEach(function(t,n){let a,s;e.activeTexture(TEXTURE0+i[n]),isTexture(e,t)?(a=t,s=null):(a=t.texture,s=t.sampler),e.bindSampler(r,s),e.bindTexture(o,a)})}:function(t){e.uniform1iv(n,i),t.forEach(function(t,r){e.activeTexture(TEXTURE0+i[r]),e.bindTexture(o,t)})}}function floatAttribSetter(e,t){return function(r){if(r.value)switch(e.disableVertexAttribArray(t),r.value.length){case 4:e.vertexAttrib4fv(t,r.value);break;case 3:e.vertexAttrib3fv(t,r.value);break;case 2:e.vertexAttrib2fv(t,r.value);break;case 1:e.vertexAttrib1fv(t,r.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(ARRAY_BUFFER$1,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,r.numComponents||r.size,r.type||FLOAT$3,r.normalize||!1,r.stride||0,r.offset||0),void 0!==r.divisor&&e.vertexAttribDivisor(t,r.divisor)}}function intAttribSetter(e,t){return function(r){if(r.value){if(e.disableVertexAttribArray(t),4!==r.value.length)throw new Error("The length of an integer constant value must be 4!");e.vertexAttrib4iv(t,r.value)}else e.bindBuffer(ARRAY_BUFFER$1,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||INT$3,r.stride||0,r.offset||0),void 0!==r.divisor&&e.vertexAttribDivisor(t,r.divisor)}}function uintAttribSetter(e,t){return function(r){if(r.value){if(e.disableVertexAttribArray(t),4!==r.value.length)throw new Error("The length of an unsigned integer constant value must be 4!");e.vertexAttrib4uiv(t,r.value)}else e.bindBuffer(ARRAY_BUFFER$1,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||UNSIGNED_INT$3,r.stride||0,r.offset||0),void 0!==r.divisor&&e.vertexAttribDivisor(t,r.divisor)}}function matAttribSetter(e,t,r){const n=r.size,a=r.count;return function(r){e.bindBuffer(ARRAY_BUFFER$1,r.buffer);const o=r.size||r.numComponents||n,i=o/a,s=r.type||FLOAT$3,u=typeMap[s].size*o,c=r.normalize||!1,f=r.offset||0,l=u/a;for(let n=0;n<a;++n)e.enableVertexAttribArray(t+n),e.vertexAttribPointer(t+n,i,s,c,u,f+l*n),void 0!==r.divisor&&e.vertexAttribDivisor(t+n,r.divisor)}}typeMap[FLOAT$3]={Type:Float32Array,size:4,setter:floatSetter,arraySetter:floatArraySetter},typeMap[35664]={Type:Float32Array,size:8,setter:floatVec2Setter},typeMap[35665]={Type:Float32Array,size:12,setter:floatVec3Setter},typeMap[35666]={Type:Float32Array,size:16,setter:floatVec4Setter},typeMap[INT$3]={Type:Int32Array,size:4,setter:intSetter,arraySetter:intArraySetter},typeMap[35667]={Type:Int32Array,size:8,setter:intVec2Setter},typeMap[35668]={Type:Int32Array,size:12,setter:intVec3Setter},typeMap[35669]={Type:Int32Array,size:16,setter:intVec4Setter},typeMap[UNSIGNED_INT$3]={Type:Uint32Array,size:4,setter:uintSetter,arraySetter:uintArraySetter},typeMap[36294]={Type:Uint32Array,size:8,setter:uintVec2Setter},typeMap[36295]={Type:Uint32Array,size:12,setter:uintVec3Setter},typeMap[36296]={Type:Uint32Array,size:16,setter:uintVec4Setter},typeMap[BOOL]={Type:Uint32Array,size:4,setter:intSetter,arraySetter:intArraySetter},typeMap[35671]={Type:Uint32Array,size:8,setter:intVec2Setter},typeMap[35672]={Type:Uint32Array,size:12,setter:intVec3Setter},typeMap[35673]={Type:Uint32Array,size:16,setter:intVec4Setter},typeMap[35674]={Type:Float32Array,size:16,setter:floatMat2Setter},typeMap[35675]={Type:Float32Array,size:36,setter:floatMat3Setter},typeMap[35676]={Type:Float32Array,size:64,setter:floatMat4Setter},typeMap[35685]={Type:Float32Array,size:24,setter:floatMat23Setter},typeMap[35686]={Type:Float32Array,size:32,setter:floatMat24Setter},typeMap[35687]={Type:Float32Array,size:24,setter:floatMat32Setter},typeMap[35688]={Type:Float32Array,size:48,setter:floatMat34Setter},typeMap[35689]={Type:Float32Array,size:32,setter:floatMat42Setter},typeMap[35690]={Type:Float32Array,size:48,setter:floatMat43Setter},typeMap[35678]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:3553},typeMap[35680]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:34067},typeMap[35679]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:32879},typeMap[35682]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:3553},typeMap[36289]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:35866},typeMap[36292]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:35866},typeMap[36293]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:34067},typeMap[36298]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:3553},typeMap[36299]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:32879},typeMap[36300]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:34067},typeMap[36303]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:35866},typeMap[36306]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:3553},typeMap[36307]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:32879},typeMap[36308]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:34067},typeMap[36311]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:35866};const attrTypeMap={};function addLineNumbers(e,t){return t=t||0,++t,e.split("\n").map(function(e,r){return r+t+": "+e}).join("\n")}attrTypeMap[FLOAT$3]={size:4,setter:floatAttribSetter},attrTypeMap[35664]={size:8,setter:floatAttribSetter},attrTypeMap[35665]={size:12,setter:floatAttribSetter},attrTypeMap[35666]={size:16,setter:floatAttribSetter},attrTypeMap[INT$3]={size:4,setter:intAttribSetter},attrTypeMap[35667]={size:8,setter:intAttribSetter},attrTypeMap[35668]={size:12,setter:intAttribSetter},attrTypeMap[35669]={size:16,setter:intAttribSetter},attrTypeMap[UNSIGNED_INT$3]={size:4,setter:uintAttribSetter},attrTypeMap[36294]={size:8,setter:uintAttribSetter},attrTypeMap[36295]={size:12,setter:uintAttribSetter},attrTypeMap[36296]={size:16,setter:uintAttribSetter},attrTypeMap[BOOL]={size:4,setter:intAttribSetter},attrTypeMap[35671]={size:8,setter:intAttribSetter},attrTypeMap[35672]={size:12,setter:intAttribSetter},attrTypeMap[35673]={size:16,setter:intAttribSetter},attrTypeMap[35674]={size:4,setter:matAttribSetter,count:2},attrTypeMap[35675]={size:9,setter:matAttribSetter,count:3},attrTypeMap[35676]={size:16,setter:matAttribSetter,count:4};const spaceRE=/^[ \t]*\n/;function loadShader(e,t,r,n){const a=n||error$1,o=e.createShader(r);let i=0;if(spaceRE.test(t)&&(i=1,t=t.replace(spaceRE,"")),e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,COMPILE_STATUS)){const r=e.getShaderInfoLog(o);return a(addLineNumbers(t,i)+"\n*** Error compiling shader: "+r),e.deleteShader(o),null}return o}function getProgramOptions(e,t,r){let n,a;if("function"==typeof t&&(r=t,t=void 0),"function"==typeof e)r=e,e=void 0;else if(e&&!Array.isArray(e)){if(e.errorCallback)return e;const t=e;r=t.errorCallback,e=t.attribLocations,n=t.transformFeedbackVaryings,a=t.transformFeedbackMode}const o={errorCallback:r||error$1,transformFeedbackVaryings:n,transformFeedbackMode:a};if(e){let r={};Array.isArray(e)?e.forEach(function(e,n){r[e]=t?t[n]:n}):r=e,o.attribLocations=r}return o}const defaultShaderType=["VERTEX_SHADER","FRAGMENT_SHADER"];function getShaderTypeFromScriptType(e,t){return t.indexOf("frag")>=0?FRAGMENT_SHADER:t.indexOf("vert")>=0?VERTEX_SHADER:void 0}function deleteShaders(e,t){t.forEach(function(t){e.deleteShader(t)})}function createProgram(e,t,r,n,a){const o=getProgramOptions(r,n,a),i=[],s=[];for(let r=0;r<t.length;++r){let n=t[r];if("string"==typeof n){const t=getElementById(n),a=t?t.text:n;let i=e[defaultShaderType[r]];t&&t.type&&(i=getShaderTypeFromScriptType(e,t.type)||i),n=loadShader(e,a,i,o.errorCallback),s.push(n)}isShader(e,n)&&i.push(n)}if(i.length!==t.length)return o.errorCallback("not enough shaders for program"),deleteShaders(e,s),null;const u=e.createProgram();i.forEach(function(t){e.attachShader(u,t)}),o.attribLocations&&Object.keys(o.attribLocations).forEach(function(t){e.bindAttribLocation(u,o.attribLocations[t],t)});let c=o.transformFeedbackVaryings;if(c&&(c.attribs&&(c=c.attribs),Array.isArray(c)||(c=Object.keys(c)),e.transformFeedbackVaryings(u,c,o.transformFeedbackMode||SEPARATE_ATTRIBS)),e.linkProgram(u),!e.getProgramParameter(u,LINK_STATUS)){const t=e.getProgramInfoLog(u);return o.errorCallback("Error in program linking:"+t),e.deleteProgram(u),deleteShaders(e,s),null}return u}function createShaderFromScript(e,t,r,n){let a="";const o=getElementById(t);if(!o)throw new Error(`unknown script element: ${t}`);a=o.text;const i=r||getShaderTypeFromScriptType(e,o.type);if(!i)throw new Error("unknown shader type");return loadShader(e,a,i,n)}function createProgramFromScripts(e,t,r,n,a){const o=getProgramOptions(r,n,a),i=[];for(let r=0;r<t.length;++r){const n=createShaderFromScript(e,t[r],e[defaultShaderType[r]],o.errorCallback);if(!n)return null;i.push(n)}return createProgram(e,i,o)}function createProgramFromSources(e,t,r,n,a){const o=getProgramOptions(r,n,a),i=[];for(let r=0;r<t.length;++r){const n=loadShader(e,t[r],e[defaultShaderType[r]],o.errorCallback);if(!n)return null;i.push(n)}return createProgram(e,i,o)}function isBuiltIn(e){const t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}function createUniformSetters(e,t){let r=0;function n(t,n,a){const o=n.name.endsWith("[0]"),i=n.type,s=typeMap[i];if(!s)throw new Error(`unknown type: 0x${i.toString(16)}`);let u;if(s.bindPoint){const t=r;r+=n.size,u=o?s.arraySetter(e,i,t,a,n.size):s.setter(e,i,t,a,n.size)}else u=s.arraySetter&&o?s.arraySetter(e,a):s.setter(e,a);return u.location=a,u}const a={},o=e.getProgramParameter(t,ACTIVE_UNIFORMS);for(let r=0;r<o;++r){const o=e.getActiveUniform(t,r);if(isBuiltIn(o))continue;let i=o.name;i.endsWith("[0]")&&(i=i.substr(0,i.length-3));const s=e.getUniformLocation(t,o.name);s&&(a[i]=n(0,o,s))}return a}function createTransformFeedbackInfo(e,t){const r={},n=e.getProgramParameter(t,TRANSFORM_FEEDBACK_VARYINGS);for(let a=0;a<n;++a){const n=e.getTransformFeedbackVarying(t,a);r[n.name]={index:a,type:n.type,size:n.size}}return r}function bindTransformFeedbackInfo(e,t,r){t.transformFeedbackInfo&&(t=t.transformFeedbackInfo),r.attribs&&(r=r.attribs);for(const n in r){const a=t[n];if(a){const t=r[n];t.offset?e.bindBufferRange(TRANSFORM_FEEDBACK_BUFFER,a.index,t.buffer,t.offset,t.size):e.bindBufferBase(TRANSFORM_FEEDBACK_BUFFER,a.index,t.buffer)}}}function createTransformFeedback(e,t,r){const n=e.createTransformFeedback();return e.bindTransformFeedback(TRANSFORM_FEEDBACK,n),e.useProgram(t.program),bindTransformFeedbackInfo(e,t,r),e.bindTransformFeedback(TRANSFORM_FEEDBACK,null),n}function createUniformBlockSpecFromProgram(e,t){const r=e.getProgramParameter(t,ACTIVE_UNIFORMS),n=[],a=[];for(let o=0;o<r;++o){a.push(o),n.push({});const r=e.getActiveUniform(t,o);if(isBuiltIn(r))break;n[o].name=r.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(r){const o=r[0],i=r[1];e.getActiveUniforms(t,a,e[o]).forEach(function(e,t){n[t][i]=e})});const o={},i=e.getProgramParameter(t,ACTIVE_UNIFORM_BLOCKS);for(let r=0;r<i;++r){const n=e.getActiveUniformBlockName(t,r),a={index:e.getUniformBlockIndex(t,n),usedByVertexShader:e.getActiveUniformBlockParameter(t,r,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),usedByFragmentShader:e.getActiveUniformBlockParameter(t,r,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),size:e.getActiveUniformBlockParameter(t,r,UNIFORM_BLOCK_DATA_SIZE),uniformIndices:e.getActiveUniformBlockParameter(t,r,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES)};a.used=a.usedByVertexShader||a.usedByFragmentShader,o[n]=a}return{blockSpecs:o,uniformData:n}}const arraySuffixRE=/\[\d+\]\.$/;function createUniformBlockInfoFromProgram(e,t,r,n){const a=r.blockSpecs,o=r.uniformData,i=a[n];if(!i)return warn$1("no uniform block object named:",n),{name:n,uniforms:{}};const s=new ArrayBuffer(i.size),u=e.createBuffer(),c=i.index;e.bindBuffer(UNIFORM_BUFFER,u),e.uniformBlockBinding(t,i.index,c);let f=n+".";arraySuffixRE.test(f)&&(f=f.replace(arraySuffixRE,"."));const l={};return i.uniformIndices.forEach(function(e){const t=o[e],r=typeMap[t.type],n=r.Type,a=t.size*r.size;let i=t.name;i.substr(0,f.length)===f&&(i=i.substr(f.length)),l[i]=new n(s,t.offset,a/n.BYTES_PER_ELEMENT)}),{name:n,array:s,asFloat:new Float32Array(s),buffer:u,uniforms:l}}function createUniformBlockInfo(e,t,r){return createUniformBlockInfoFromProgram(e,t.program,t.uniformBlockSpec,r)}function bindUniformBlock(e,t,r){const n=(t.uniformBlockSpec||t).blockSpecs[r.name];if(n){const t=n.index;return e.bindBufferRange(UNIFORM_BUFFER,t,r.buffer,r.offset||0,r.array.byteLength),!0}return!1}function setUniformBlock(e,t,r){bindUniformBlock(e,t,r)&&e.bufferData(UNIFORM_BUFFER,r.array,DYNAMIC_DRAW)}function setBlockUniforms(e,t){const r=e.uniforms;for(const e in t){const n=r[e];if(n){const r=t[e];r.length?n.set(r):n[0]=r}}}function setUniforms(e,t){const r=e.uniformSetters||e,n=arguments.length;for(let e=1;e<n;++e){const t=arguments[e];if(Array.isArray(t)){const e=t.length;for(let n=0;n<e;++n)setUniforms(r,t[n])}else for(const e in t){const n=r[e];n&&n(t[e])}}}const setUniformsAndBindTextures=setUniforms;function createAttributeSetters(e,t){const r={},n=e.getProgramParameter(t,ACTIVE_ATTRIBUTES);for(let a=0;a<n;++a){const n=e.getActiveAttrib(t,a);if(isBuiltIn(n))continue;const o=e.getAttribLocation(t,n.name),i=attrTypeMap[n.type],s=i.setter(e,o,i);s.location=o,r[n.name]=s}return r}function setAttributes(e,t){for(const r in t){const n=e[r];n&&n(t[r])}}function setBuffersAndAttributes(e,t,r){r.vertexArrayObject?e.bindVertexArray(r.vertexArrayObject):(setAttributes(t.attribSetters||t,r.attribs),r.indices&&e.bindBuffer(ELEMENT_ARRAY_BUFFER$1,r.indices))}function createProgramInfoFromProgram(e,t){const r={program:t,uniformSetters:createUniformSetters(e,t),attribSetters:createAttributeSetters(e,t)};return isWebGL2(e)&&(r.uniformBlockSpec=createUniformBlockSpecFromProgram(e,t),r.transformFeedbackInfo=createTransformFeedbackInfo(e,t)),r}function createProgramInfo(e,t,r,n,a){const o=getProgramOptions(r,n,a);let i=!0;if(t=t.map(function(e){if(e.indexOf("\n")<0){const t=getElementById(e);t?e=t.text:(o.errorCallback("no element with id: "+e),i=!1)}return e}),!i)return null;const s=createProgramFromSources(e,t,o);return s?createProgramInfoFromProgram(e,s):null}var programs=Object.freeze({__proto__:null,createAttributeSetters:createAttributeSetters,createProgram:createProgram,createProgramFromScripts:createProgramFromScripts,createProgramFromSources:createProgramFromSources,createProgramInfo:createProgramInfo,createProgramInfoFromProgram:createProgramInfoFromProgram,createUniformSetters:createUniformSetters,createUniformBlockSpecFromProgram:createUniformBlockSpecFromProgram,createUniformBlockInfoFromProgram:createUniformBlockInfoFromProgram,createUniformBlockInfo:createUniformBlockInfo,createTransformFeedback:createTransformFeedback,createTransformFeedbackInfo:createTransformFeedbackInfo,bindTransformFeedbackInfo:bindTransformFeedbackInfo,setAttributes:setAttributes,setBuffersAndAttributes:setBuffersAndAttributes,setUniforms:setUniforms,setUniformsAndBindTextures:setUniformsAndBindTextures,setUniformBlock:setUniformBlock,setBlockUniforms:setBlockUniforms,bindUniformBlock:bindUniformBlock});const TRIANGLES=4,UNSIGNED_SHORT$3=5123;function drawBufferInfo(e,t,r,n,a,o){r=void 0===r?TRIANGLES:r;const i=t.indices,s=t.elementType,u=void 0===n?t.numElements:n;a=void 0===a?0:a,s||i?void 0!==o?e.drawElementsInstanced(r,u,void 0===s?UNSIGNED_SHORT$3:t.elementType,a,o):e.drawElements(r,u,void 0===s?UNSIGNED_SHORT$3:t.elementType,a):void 0!==o?e.drawArraysInstanced(r,a,u,o):e.drawArrays(r,a,u)}function drawObjectList(e,t){let r=null,n=null;t.forEach(function(t){if(!1===t.active)return;const a=t.programInfo,o=t.vertexArrayInfo||t.bufferInfo;let i=!1;const s=void 0===t.type?TRIANGLES:t.type;a!==r&&(r=a,e.useProgram(a.program),i=!0),(i||o!==n)&&(n&&n.vertexArrayObject&&!o.vertexArrayObject&&e.bindVertexArray(null),n=o,setBuffersAndAttributes(e,a,o)),setUniforms(a,t.uniforms),drawBufferInfo(e,o,s,t.count,t.offset,t.instanceCount)}),n&&n.vertexArrayObject&&e.bindVertexArray(null)}var draw=Object.freeze({__proto__:null,drawBufferInfo:drawBufferInfo,drawObjectList:drawObjectList});const FRAMEBUFFER=36160,RENDERBUFFER=36161,TEXTURE_2D$2=3553,UNSIGNED_BYTE$3=5121,DEPTH_COMPONENT$1=6402,RGBA$1=6408,RGBA4$1=32854,RGB5_A1$1=32855,RGB565$1=36194,DEPTH_COMPONENT16$1=33189,STENCIL_INDEX=6401,STENCIL_INDEX8=36168,DEPTH_STENCIL$1=34041,COLOR_ATTACHMENT0=36064,DEPTH_ATTACHMENT=36096,STENCIL_ATTACHMENT=36128,DEPTH_STENCIL_ATTACHMENT=33306,CLAMP_TO_EDGE$1=33071,LINEAR$1=9729,defaultAttachments=[{format:6408,type:5121,min:LINEAR$1,wrap:CLAMP_TO_EDGE$1},{format:34041}],attachmentsByFormat={};function getAttachmentPointForFormat(e){return attachmentsByFormat[e]}attachmentsByFormat[34041]=33306,attachmentsByFormat[6401]=36128,attachmentsByFormat[36168]=36128,attachmentsByFormat[6402]=36096,attachmentsByFormat[33189]=36096;const renderbufferFormats={};function isRenderbufferFormat(e){return renderbufferFormats[e]}function createFramebufferInfo(e,t,r,n){const a=FRAMEBUFFER,o=e.createFramebuffer();e.bindFramebuffer(a,o),r=r||e.drawingBufferWidth,n=n||e.drawingBufferHeight;let i=0;const s={framebuffer:o,attachments:[],width:r,height:n};return(t=t||defaultAttachments).forEach(function(t){let o=t.attachment;const u=t.format;let c=getAttachmentPointForFormat(u);if(c||(c=COLOR_ATTACHMENT0+i++),!o)if(isRenderbufferFormat(u))o=e.createRenderbuffer(),e.bindRenderbuffer(RENDERBUFFER,o),e.renderbufferStorage(RENDERBUFFER,u,r,n);else{const a=Object.assign({},t);a.width=r,a.height=n,void 0===a.auto&&(a.auto=!1,a.min=a.min||a.minMag||LINEAR$1,a.mag=a.mag||a.minMag||LINEAR$1,a.wrapS=a.wrapS||a.wrap||CLAMP_TO_EDGE$1,a.wrapT=a.wrapT||a.wrap||CLAMP_TO_EDGE$1),o=createTexture(e,a)}if(isRenderbuffer(e,o))e.framebufferRenderbuffer(a,c,RENDERBUFFER,o);else{if(!isTexture(e,o))throw new Error("unknown attachment type");void 0!==t.layer?e.framebufferTextureLayer(a,c,o,t.level||0,t.layer):e.framebufferTexture2D(a,c,t.target||TEXTURE_2D$2,o,t.level||0)}s.attachments.push(o)}),s}function resizeFramebufferInfo(e,t,r,n,a){n=n||e.drawingBufferWidth,a=a||e.drawingBufferHeight,t.width=n,t.height=a,(r=r||defaultAttachments).forEach(function(r,o){const i=t.attachments[o],s=r.format;if(isRenderbuffer(e,i))e.bindRenderbuffer(RENDERBUFFER,i),e.renderbufferStorage(RENDERBUFFER,s,n,a);else{if(!isTexture(e,i))throw new Error("unknown attachment type");resizeTexture(e,i,r,n,a)}})}function bindFramebufferInfo(e,t,r){r=r||FRAMEBUFFER,t?(e.bindFramebuffer(r,t.framebuffer),e.viewport(0,0,t.width,t.height)):(e.bindFramebuffer(r,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))}renderbufferFormats[32854]=!0,renderbufferFormats[32855]=!0,renderbufferFormats[36194]=!0,renderbufferFormats[34041]=!0,renderbufferFormats[33189]=!0,renderbufferFormats[6401]=!0,renderbufferFormats[36168]=!0;var framebuffers=Object.freeze({__proto__:null,bindFramebufferInfo:bindFramebufferInfo,createFramebufferInfo:createFramebufferInfo,resizeFramebufferInfo:resizeFramebufferInfo});const ELEMENT_ARRAY_BUFFER$2=34963;function createVertexArrayInfo(e,t,r){const n=e.createVertexArray();return e.bindVertexArray(n),t.length||(t=[t]),t.forEach(function(t){setBuffersAndAttributes(e,t,r)}),e.bindVertexArray(null),{numElements:r.numElements,elementType:r.elementType,vertexArrayObject:n}}function createVAOAndSetAttributes(e,t,r,n){const a=e.createVertexArray();return e.bindVertexArray(a),setAttributes(t,r),n&&e.bindBuffer(ELEMENT_ARRAY_BUFFER$2,n),e.bindVertexArray(null),a}function createVAOFromBufferInfo(e,t,r){return createVAOAndSetAttributes(e,t.attribSetters||t,r.attribs,r.indices)}var vertexArrays=Object.freeze({__proto__:null,createVertexArrayInfo:createVertexArrayInfo,createVAOAndSetAttributes:createVAOAndSetAttributes,createVAOFromBufferInfo:createVAOFromBufferInfo});const defaults$2={addExtensionsToContext:!0};function setDefaults$2(e){copyExistingProperties(e,defaults$2),setDefaults(e),setDefaults$1(e)}const prefixRE=/^(.*?)_/;function addExtensionToContext(e,t){glEnumToString(e,0);const r=e.getExtension(t);if(r){const n={},a=prefixRE.exec(t)[1],o="_"+a;for(const t in r){const i=r[t],s="function"==typeof i,u=s?a:o;let c=t;t.endsWith(u)&&(c=t.substring(0,t.length-u.length)),void 0!==e[c]?s||e[c]===i||warn(c,e[c],i,t):s?e[c]=function(e){return function(){return e.apply(r,arguments)}}(i):(e[c]=i,n[c]=i)}n.constructor={name:r.constructor.name},glEnumToString(n,0)}return r}const supportedExtensions=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function addExtensionsToContext(e){for(let t=0;t<supportedExtensions.length;++t)addExtensionToContext(e,supportedExtensions[t])}function create3DContext(e,t){const r=["webgl","experimental-webgl"];let n=null;for(let a=0;a<r.length;++a)if(n=e.getContext(r[a],t)){defaults$2.addExtensionsToContext&&addExtensionsToContext(n);break}return n}function getWebGLContext(e,t){return create3DContext(e,t)}function createContext(e,t){const r=["webgl2","webgl","experimental-webgl"];let n=null;for(let a=0;a<r.length;++a)if(n=e.getContext(r[a],t)){defaults$2.addExtensionsToContext&&addExtensionsToContext(n);break}return n}function getContext(e,t){return createContext(e,t)}function resizeCanvasToDisplaySize(e,t){t=t||1,t=Math.max(0,t);const r=e.clientWidth*t|0,n=e.clientHeight*t|0;return(e.width!==r||e.height!==n)&&(e.width=r,e.height=n,!0)}export{addExtensionsToContext,attributes,bindFramebufferInfo,bindTransformFeedbackInfo,bindUniformBlock,canFilter,canGenerateMipmap,createAttribsFromArrays,createAttributeSetters,createBufferFromArray,createBufferFromTypedArray,createBufferInfoFromArrays,createBuffersFromArrays,createFramebufferInfo,createProgram,createProgramFromScripts,createProgramFromSources,createProgramInfo,createProgramInfoFromProgram,createSampler,createSamplers,createTexture,createTextures,createTransformFeedback,createTransformFeedbackInfo,createUniformBlockInfo,createUniformBlockInfoFromProgram,createUniformBlockSpecFromProgram,createUniformSetters,createVAOAndSetAttributes,createVAOFromBufferInfo,createVertexArrayInfo,draw,drawBufferInfo,drawObjectList,framebuffers,getArray as getArray_,getBytesPerElementForInternalFormat,getContext,getFormatAndTypeForInternalFormat,getGLTypeForTypedArray,getGLTypeForTypedArrayType,getNumComponentsForFormat,getNumComponents as getNumComponents_,getTypedArrayTypeForGLType,getWebGLContext,glEnumToString,isArrayBuffer,isWebGL1,isWebGL2,loadTextureFromUrl,m4,primitives,programs,resizeCanvasToDisplaySize,resizeFramebufferInfo,resizeTexture,setAttribInfoBufferFromArray,setDefaults as setAttributeDefaults_,setAttributePrefix,setAttributes,setBlockUniforms,setBuffersAndAttributes,setDefaultTextureColor,setDefaults$2 as setDefaults,setEmptyTexture,setSamplerParameters,setDefaults$1 as setTextureDefaults_,setTextureFilteringForSize,setTextureFromArray,setTextureFromElement,setTextureParameters,setUniformBlock,setUniforms,setUniformsAndBindTextures,textures,typedarrays,utils,v3,vertexArrays};